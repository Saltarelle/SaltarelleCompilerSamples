if(typeof global==="undefined")global=window;var ss={};ss.isUndefined=function(a){return a===undefined};ss.isNull=function(a){return a===null};ss.isNullOrUndefined=function(a){return a===null||a===undefined};ss.isValue=function(a){return a!==null&&a!==undefined};ss.referenceEquals=function(a,b){return ss.isValue(a)?a===b:!ss.isValue(b)};ss.mkdict=function(a){a=arguments.length!=1?arguments:arguments[0];for(var c={},b=0;b<a.length;b+=2)c[a[b]]=a[b+1];return c};ss.coalesce=function(a,b){return ss.isValue(a)?a:b};ss.isDate=function(a){return Object.prototype.toString.call(a)==="[object Date]"};ss.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};ss.getHashCode=function(a){if(!ss.isValue(a))throw"Cannot get hash code of null";else if(typeof a.getHashCode==="function")return a.getHashCode();else if(typeof a==="boolean")return a?1:0;else if(typeof a==="number"){var b=a.toExponential();b=b.substr(0,b.indexOf("e"));return parseInt(b.replace(".",""),10)&4294967295}else if(typeof a==="string"){for(var c=0,d=0;d<a.length;d++)c=c*31+a.charCodeAt(d)&4294967295;return c}else return ss.isDate(a)?a.valueOf()&4294967295:ss.defaultHashCode(a)};ss.defaultHashCode=function(a){return a.$__hashCode__||(a.$__hashCode__=Math.random()*4294967295|0)};ss.equals=function(a,b){if(!ss.isValue(a))throw"Object is null";else if(typeof a.equals==="function")return a.equals(b);return ss.isDate(a)&&ss.isDate(b)?a.valueOf()===b.valueOf():typeof a==="function"&&typeof b==="function"?ss.delegateEquals(a,b):ss.isNullOrUndefined(a)&&ss.isNullOrUndefined(b)?true:a===b};ss.compare=function(a,b){if(!ss.isValue(a))throw"Object is null";else return typeof a==="number"||typeof a==="string"||typeof a==="boolean"?a<b?-1:a>b?1:0:ss.isDate(a)?ss.compare(a.valueOf(),b.valueOf()):a.compareTo(b)};ss.equalsT=function(a,b){if(!ss.isValue(a))throw"Object is null";else return typeof a==="number"||typeof a==="string"||typeof a==="boolean"?a===b:ss.isDate(a)?a.valueOf()===b.valueOf():a.equalsT(b)};ss.staticEquals=function(b,a){return!ss.isValue(b)?!ss.isValue(a):ss.isValue(a)?ss.equals(b,a):false};if(typeof window=="object"){if(!window.Element){window.Element=function(){};window.Element.isInstanceOfType=function(a){return a&&typeof a.constructor==="undefined"&&typeof a.tagName==="string"}}window.Element.__typeName="Element";window.Element.__baseType=Object;if(!window.XMLHttpRequest)window.XMLHttpRequest=function(){for(var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],a=0;a<b.length;a++)try{return new ActiveXObject(b[a])}catch(d){}return null};ss.parseXml=function(d){try{if(DOMParser){var e=new DOMParser;return e.parseFromString(d,"text/xml")}else for(var c=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"],b=0;b<c.length;b++){var a=new ActiveXObject(c[b]);a.async=false;a.loadXML(d);a.setProperty("SelectionLanguage","XPath");return a}}catch(f){}return null}}ss.registerType=function(g,f,h){for(var b=g,a=f.split("."),d=0;d<a.length-1;d++){var e=a[d],c=b[e];if(!c)b[e]=c={};b=c}b[a[a.length-1]]=h};ss.__genericCache={};ss._makeGenericTypeName=function(d,c){for(var b=d.__typeName,a=0;a<c.length;a++)b+=(a===0?"[":",")+ss.getTypeFullName(c[a]);b+="]";return b};ss.makeGenericType=function(b,a){var c=ss._makeGenericTypeName(b,a);return ss.__genericCache[c]||b.apply(null,a)};ss.registerGenericClassInstance=function(a,c,b,f,e){var d=ss._makeGenericTypeName(c,b);ss.__genericCache[d]=a;a.__genericTypeDefinition=c;a.__typeArguments=b;ss.registerClass(null,d,a,f(),e())};ss.registerGenericInterfaceInstance=function(a,c,b,e){var d=ss._makeGenericTypeName(c,b);ss.__genericCache[d]=a;a.__genericTypeDefinition=c;a.__typeArguments=b;ss.registerInterface(null,d,a,e())};ss.isGenericTypeDefinition=function(a){return a.__isGenericTypeDefinition||false};ss.getGenericTypeDefinition=function(a){return a.__genericTypeDefinition||null};ss.getGenericParameterCount=function(a){return a.__typeArgumentCount||0};ss.getGenericArguments=function(a){return a.__typeArguments||null};ss.registerClass=function(f,e,a,d,b){f&&ss.registerType(f,e,a);a.prototype.constructor=a;a.__typeName=e;a.__class=true;a.__baseType=d||Object;d&&ss.setupBase(a);if(b instanceof Array)a.__interfaces=b;else if(b){a.__interfaces=[];for(var c=4;c<arguments.length;c++){b=arguments[c];a.__interfaces.push(b)}}};ss.registerGenericClass=function(c,b,a,d){c&&ss.registerType(c,b,a);a.prototype.constructor=a;a.__typeName=b;a.__class=true;a.__typeArgumentCount=d;a.__isGenericTypeDefinition=true;a.__baseType=Object};ss.registerInterface=function(e,d,a,b){e&&ss.registerType(e,d,a);a.__typeName=d;a.__interface=true;if(b instanceof Array)a.__interfaces=b;else if(b){a.__interfaces=[];for(var c=3;c<arguments.length;c++)a.__interfaces.push(arguments[c])}};ss.registerGenericInterface=function(c,b,a,d){c&&ss.registerType(c,b,a);a.prototype.constructor=a;a.__typeName=b;a.__interface=true;a.__typeArgumentCount=d;a.__isGenericTypeDefinition=true};ss.registerEnum=function(d,c,a,e){d&&ss.registerType(d,c,a);for(var b in a.prototype)a[b]=a.prototype[b];a.__typeName=c;a.__enum=true;if(e)a.__flags=true;a.getDefaultValue=a.createInstance=function(){return 0};a.isInstanceOfType=function(a){return typeof a=="number"}};ss.setupBase=function(b){var c=b.__baseType;for(var a in c.prototype){var d=c.prototype[a];if(!b.prototype[a])b.prototype[a]=d}};ss.getBaseType=function(a){return a.__baseType||(a===Object?null:Object)};ss.getTypeFullName=function(a){return a===Array?"Array":a===Boolean?"Boolean":a===Date?"Date":a===Error?"Error":a===Function?"Function":a===Number?"Number":a===Object?"Object":a===RegExp?"RegExp":a===String?"String":a.__typeName||"Object"};ss.getTypeName=function(d){var a=ss.getTypeFullName(d),c=a.indexOf("["),b=a.lastIndexOf(".",c>=0?c:a.length);return b>0?a.substr(b+1):a};ss.getInterfaces=function(a){return a===Array?[ss_IEnumerable,ss_ICollection,ss_IList]:a===Date||a===Number?[ss_IEquatable,ss_IComparable,ss_IFormattable]:a===Boolean||a===String?[ss_IEquatable,ss_IComparable]:a.__interfaces||[]};ss.isInstanceOfType=function(b,a){return ss.isNullOrUndefined(b)?false:typeof a.isInstanceOfType==="function"?a.isInstanceOfType(b):a==Object||b instanceof a?true:ss.isAssignableFrom(a,ss.getInstanceType(b))};ss.isAssignableFrom=function(b,d){if(b==Object||b==d)return true;if(b.__class){var a=d.__baseType;while(a){if(b==a)return true;a=a.__baseType}}else if(b.__interface){var c=ss.getInterfaces(d);if(c&&ss.contains(c,b))return true;var a=ss.getBaseType(d);while(a){c=ss.getInterfaces(a);if(c&&ss.contains(c,b))return true;a=ss.getBaseType(a)}}return false};ss.hasProperty=function(a,b){return typeof a["get_"+b]==="function"||typeof a["set_"+b]==="function"};ss.isClass=function(a){return a.__class==true||a===Array||a===Function||a===RegExp||a===String||a===Error||a===Object};ss.isEnum=function(a){return a.__enum==true};ss.isFlags=function(a){return a.__enum==true&&a.__flags==true};ss.isInterface=function(a){return a.__interface==true};ss.safeCast=function(a,b){return ss.isInstanceOfType(a,b)?a:null};ss.cast=function(a,b){if(a===null)return null;else if(typeof a==="undefined"||ss.isInstanceOfType(a,b))return a;throw"Cannot cast object to type "+ss.getTypeFullName(b);};ss.getInstanceType=function(a){if(a===null)throw"Cannot get type of null";if(typeof a==="undefined")throw"Cannot get type of undefined";var b=null;try{b=a.constructor}catch(c){}return b||Object};ss.getType=function(b){if(!b)return null;if(!ss.__typeCache)ss.__typeCache={};var a=ss.__typeCache[b];if(!a){for(var c=b.split(","),a=c.length>1?require(c[1].trim):global,e=c[0].trim().split("."),d=0;d<e.length;d++){a=a[e[d]];if(!a)break}ss.__typeCache[b]=a||null}return a};ss.getDefaultValue=function(a){return typeof a.getDefaultValue==="function"?a.getDefaultValue():a===Boolean?false:a===Date?new Date(0):a===Number?0:null};ss.createInstance=function(a){return typeof a.createInstance==="function"?a.createInstance():a===Boolean?false:a===Date?new Date(0):a===Number?0:a===String?"":new a};ss.applyConstructor=function(a,c){var b=function(){return a.apply(this,c)};b.prototype=a.prototype;return new b};var ss_IFormattable=function(){};ss_IFormattable.prototype={format:null};ss.registerInterface(global,"ss.IFormattable",ss_IFormattable);ss.format=function(a,b){return typeof a==="number"?ss.formatNumber(a,b):ss.isDate(a)?ss.formatDate(a,b):a.format(b)};var ss_IComparable=function(){};ss_IComparable.prototype={compareTo:null};ss.registerInterface(global,"ss.IComparable",ss_IComparable);var ss_IEquatable=function(){};ss_IEquatable.prototype={equalsT:null};ss.registerInterface(global,"ss.IEquatable",ss_IEquatable);ss.clearKeys=function(a){for(var b in a)if(a.hasOwnProperty(b))delete a[b]};ss.keyExists=function(b,a){return b[a]!==undefined};if(!Object.keys){Object.keys=function(b){var a=[];for(var c in b)b.hasOwnProperty(c)&&a.push(c);return a};ss.getKeyCount=function(b){var a=0;for(var c in b)if(b.hasOwnProperty(c))a++;return a}}else ss.getKeyCount=function(a){return Object.keys(a).length};ss.formatNumber=function(b,a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?b.toString():ss._netFormatNumber(b,a,false)};ss.localeFormatNumber=function(b,a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?b.toLocaleString():ss._netFormatNumber(b,a,true)};ss._commaFormatNumber=function(a,j,n,o){var c=null,h=a.indexOf(n);if(h>0){c=a.substr(h);a=a.substr(0,h)}var i=ss.startsWithString(a,"-");if(i)a=a.substr(1);var f=0,g=j[f];if(a.length<g)return(i?"-":"")+(c?a+c:a);var k=a.length,b="",l=false;while(!l){var e=g,d=k-e;if(d<0){g+=d;e+=d;d=0;l=true}if(!e)break;var m=a.substr(d,e);if(b.length)b=m+o+b;else b=m;k-=e;if(f<j.length-1){f++;g=j[f]}}if(i)b="-"+b;return c?b+c:b};ss._netFormatNumber=function(d,g,h){var b=h?ss_CultureInfo.CurrentCulture.numberFormat:ss_CultureInfo.InvariantCulture.numberFormat,a="",c=-1;if(g.length>1)c=parseInt(g.substr(1));var f=g.charAt(0);switch(f){case"d":case"D":a=parseInt(Math.abs(d)).toString();if(c!=-1)a=ss.padLeftString(a,c,48);if(d<0)a="-"+a;break;case"x":case"X":a=parseInt(Math.abs(d)).toString(16);if(f=="X")a=a.toUpperCase();if(c!=-1)a=ss.padLeftString(a,c,48);break;case"e":case"E":if(c==-1)a=d.toExponential();else a=d.toExponential(c);if(f=="E")a=a.toUpperCase();break;case"f":case"F":case"n":case"N":if(c==-1)c=b.numberDecimalDigits;a=d.toFixed(c).toString();if(c&&b.numberDecimalSeparator!="."){var e=a.indexOf(".");a=a.substr(0,e)+b.numberDecimalSeparator+a.substr(e+1)}if(f=="n"||f=="N")a=ss._commaFormatNumber(a,b.numberGroupSizes,b.numberDecimalSeparator,b.numberGroupSeparator);break;case"c":case"C":if(c==-1)c=b.currencyDecimalDigits;a=Math.abs(d).toFixed(c).toString();if(c&&b.currencyDecimalSeparator!="."){var e=a.indexOf(".");a=a.substr(0,e)+b.currencyDecimalSeparator+a.substr(e+1)}a=ss._commaFormatnumber(a,b.currencyGroupSizes,b.currencyDecimalSeparator,b.currencyGroupSeparator);if(d<0)a=ss.formatString(b.currencyNegativePattern,a);else a=ss.formatString(b.currencyPositivePattern,a);break;case"p":case"P":if(c==-1)c=b.percentDecimalDigits;a=(Math.abs(d)*100).toFixed(c).toString();if(c&&b.percentDecimalSeparator!="."){var e=a.indexOf(".");a=a.substr(0,e)+b.percentDecimalSeparator+a.substr(e+1)}a=ss._commaFormatNumber(a,b.percentGroupSizes,b.percentDecimalSeparator,b.percentGroupSeparator);if(d<0)a=ss.formatString(b.percentNegativePattern,a);else a=ss.formatString(b.percentPositivePattern,a)}return a};ss.compareStrings=function(a,b,c){if(c){if(a)a=a.toUpperCase();if(b)b=b.toUpperCase()}a=a||"";b=b||"";return a==b?0:a<b?-1:1};ss.concatStrings=function(){return Array.prototype.join.call(arguments,"")};ss.endsWithString=function(b,a){return!a.length?true:a.length>b.length?false:b.substr(b.length-a.length)==a};ss._formatString=function(b,c,a){if(!ss._formatRE)ss._formatRE=/(\{[^\}^\{]+\})/g;return b.replace(ss._formatRE,function(h,d){var g=parseInt(d.substr(1)),b=c[g+1];if(ss.isNullOrUndefined(b))return"";if(ss.isInstanceOfType(b,ss_IFormattable)){var f=null,e=d.indexOf(":");if(e>0)f=d.substring(e+1,d.length-1);return ss.format(b,f)}else return a?b.toLocaleString():b.toString()})};ss.formatString=function(a){return ss._formatString(a,arguments,false)};ss.stringFromChar=function(a,d){for(var c=a,b=1;b<d;b++)c+=a;return c};ss.htmlDecode=function(b){var a=document.createElement("div");a.innerHTML=b;return a.textContent||a.innerText};ss.htmlEncode=function(b){var a=document.createElement("div");a.appendChild(document.createTextNode(b));return a.innerHTML.replace(/\"/g,"&quot;")};ss.indexOfAnyString=function(g,e,a,f){var b=g.length;if(!b)return-1;e=String.fromCharCode.apply(null,e);a=a||0;f=f||b;var d=a+f-1;if(d>=b)d=b-1;for(var c=a;c<=d;c++)if(e.indexOf(g.charAt(c))>=0)return c;return-1};ss.insertString=function(a,b,c){if(!c)return a;if(!b)return c+a;var d=a.substr(0,b),e=a.substr(b);return d+c+e};ss.isNullOrEmptyString=function(a){return!a||!a.length};ss.lastIndexOfAnyString=function(g,e,a,f){var d=g.length;if(!d)return-1;e=String.fromCharCode.apply(null,e);a=a||d-1;f=f||d;var c=a-f+1;if(c<0)c=0;for(var b=a;b>=c;b--)if(e.indexOf(g.charAt(b))>=0)return b;return-1};ss.localeFormatString=function(a){return ss._formatString(a,arguments,true)};ss.padLeftString=function(a,c,b){if(a.length<c){b=String.fromCharCode(b||32);return ss.stringFromChar(b,c-a.length)+a}return a};ss.padRightString=function(a,c,b){if(a.length<c){b=String.fromCharCode(b||32);return a+ss.stringFromChar(b,c-a.length)}return a};ss.removeString=function(c,a,b){return!b||a+b>this.length?c.substr(0,a):c.substr(0,a)+c.substr(a+b)};ss.replaceAllString=function(c,b,a){a=a||"";return c.split(b).join(a)};ss.startsWithString=function(b,a){return!a.length?true:a.length>b.length?false:b.substr(0,a.length)==a};if(!String.prototype.trim)String.prototype.trim=function(){return ss.trimStartString(ss.trimEndString(this))};ss.trimEndString=function(a){return a.replace(/\s*$/,"")};ss.trimStartString=function(a){return a.replace(/^\s*/,"")};ss.arrayGet2=function(a,c){if(c.length!=(a._sizes?a._sizes.length:1))throw"Invalid number of indices";if(c[0]<0||c[0]>=(a._sizes?a._sizes[0]:a.length))throw"Index 0 out of range";var d=c[0];if(a._sizes)for(var b=1;b<a._sizes.length;b++){if(c[b]<0||c[b]>=a._sizes[b])throw"Index "+b+" out of range";d=d*a._sizes[b]+c[b]}var e=a[d];return typeof e!=="undefined"?e:a._defvalue};ss.arrayGet=function(a){return ss.arrayGet2(a,Array.prototype.slice.call(arguments,1))};ss.arraySet2=function(a,e,c){if(c.length!=(a._sizes?a._sizes.length:1))throw"Invalid number of indices";if(c[0]<0||c[0]>=(a._sizes?a._sizes[0]:a.length))throw"Index 0 out of range";var d=c[0];if(a._sizes)for(var b=1;b<a._sizes.length;b++){if(c[b]<0||c[b]>=a._sizes[b])throw"Index "+b+" out of range";d=d*a._sizes[b]+c[b]}a[d]=e};ss.arraySet=function(){return ss.arraySet2(arguments[0],arguments[arguments.length-1],Array.prototype.slice.call(arguments,1,arguments.length-1))};ss.arrayRank=function(a){return a._sizes?a._sizes.length:1};ss.arrayLength=function(a,b){if(b>=(a._sizes?a._sizes.length:1))throw"Invalid dimension";return a._sizes?a._sizes[b]:a.length};ss.arrayExtract=function(c,a,b){return!ss.isValue(b)?c.slice(a):c.slice(a,a+b)};ss.arrayAddRange=function(c,b){if(b instanceof Array)c.push.apply(c,b);else{var a=ss.getEnumerator(b);try{while(a.moveNext())ss.add(c,a.current())}finally{ss.isInstanceOfType(a,ss_IDisposable)&&ss.cast(a,ss_IDisposable).dispose()}}};ss.arrayClone=function(a){return a.length===1?[a[0]]:Array.apply(null,a)};ss.arrayPeekFront=function(a){if(a.length)return a[0];throw"Array is empty";};ss.arrayPeekBack=function(a){if(a.length)return a[a.length-1];throw"Array is empty";};if(!Array.prototype.every)Array.prototype.every=function(b,c){for(var d=this.length,a=0;a<d;a++)if(a in this&&!b.call(c,this[a],a,this))return false;return true};if(!Array.prototype.filter)Array.prototype.filter=function(d,e){for(var f=this.length,b=[],a=0;a<f;a++)if(a in this){var c=this[a];d.call(e,c,a,this)&&b.push(c)}return b};if(!Array.prototype.forEach)Array.prototype.forEach=function(b,c){for(var d=this.length,a=0;a<d;a++)a in this&&b.call(c,this[a],a,this)};ss.indexOfArray=function(c,d,b){b=b||0;for(var a=b;a<c.length;a++)if(ss.staticEquals(c[a],d))return a;return-1};ss.arrayInsertRange=function(c,b,a){if(a instanceof Array)if(b===0)c.unshift.apply(c,a);else for(var e=0;e<a.length;e++)c.splice(b+e,0,a[e]);else{var d=ss.getEnumerator(a);try{while(d.moveNext()){c.insert(b,d.current());b++}}finally{ss.isInstanceOfType(d,ss_IDisposable)&&ss.cast(d,ss_IDisposable).dispose()}}};if(!Array.prototype.map)Array.prototype.map=function(d,e){for(var b=this.length,c=new Array(b),a=0;a<b;a++)if(a in this)c[a]=d.call(e,this[a],a,this);return c};ss.arrayRemoveRange=function(c,b,a){c.splice(b,a)};if(!Array.prototype.some)Array.prototype.some=function(b,c){for(var d=this.length,a=0;a<d;a++)if(a in this&&b.call(c,this[a],a,this))return true;return false};ss.arrayFromEnumerable=function(c){var a=ss.getEnumerator(c),b=[];try{while(a.moveNext())b.push(a.current())}finally{a.dispose()}return b};ss.multidimArray=function(d){var a=[];a._defvalue=d;a._sizes=[arguments[1]];for(var c=arguments[1],b=2;b<arguments.length;b++){c*=arguments[b];a._sizes[b-1]=arguments[b]}a.length=c;return a};ss.utcNow=function(){var a=new Date;return new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()))};ss.today=function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())};ss.formatDate=function(b,a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?b.toString():a=="id"?b.toDateString():a=="it"?b.toTimeString():ss._netFormatDate(b,a,false)};ss.localeFormatDate=function(b,a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?b.toLocaleString():a=="id"?b.toLocaleDateString():a=="it"?b.toLocaleTimeString():ss._netFormatDate(b,a,true)};ss._netFormatDate=function(b,d,i){var c=i?ss_CultureInfo.CurrentCulture.dateFormat:ss_CultureInfo.InvariantCulture.dateFormat;if(d.length==1)switch(d){case"f":d=c.longDatePattern+" "+c.shortTimePattern;break;case"F":d=c.dateTimePattern;break;case"d":d=c.shortDatePattern;break;case"D":d=c.longDatePattern;break;case"t":d=c.shortTimePattern;break;case"T":d=c.longTimePattern;break;case"g":d=c.shortDatePattern+" "+c.shortTimePattern;break;case"G":d=c.shortDatePattern+" "+c.longTimePattern;break;case"R":case"r":c=ss_CultureInfo.InvariantCulture.dateFormat;d=c.gmtDateTimePattern;break;case"u":d=c.universalDateTimePattern;break;case"U":d=c.dateTimePattern;b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());break;case"s":d=c.sortableDateTimePattern}if(d.charAt(0)=="%")d=d.substr(1);if(!Date._formatRE)Date._formatRE=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g;var g=Date._formatRE,h=new ss_StringBuilder;g.lastIndex=0;while(true){var j=g.lastIndex,f=g.exec(d);h.append(d.slice(j,f?f.index:d.length));if(!f)break;var e=f[0],a=e;switch(e){case"dddd":a=c.dayNames[b.getDay()];break;case"ddd":a=c.shortDayNames[b.getDay()];break;case"dd":a=ss.padLeftString(b.getDate().toString(),2,48);break;case"d":a=b.getDate();break;case"MMMM":a=c.monthNames[b.getMonth()];break;case"MMM":a=c.shortMonthNames[b.getMonth()];break;case"MM":a=ss.padLeftString((b.getMonth()+1).toString(),2,48);break;case"M":a=b.getMonth()+1;break;case"yyyy":a=b.getFullYear();break;case"yy":a=ss.padLeftString((b.getFullYear()%100).toString(),2,48);break;case"y":a=b.getFullYear()%100;break;case"h":case"hh":a=b.getHours()%12;if(!a)a="12";else if(e=="hh")a=ss.padLeftString(a.toString(),2,48);break;case"HH":a=ss.padLeftString(b.getHours().toString(),2,48);break;case"H":a=b.getHours();break;case"mm":a=ss.padLeftString(b.getMinutes().toString(),2,48);break;case"m":a=b.getMinutes();break;case"ss":a=ss.padLeftString(b.getSeconds().toString(),2,48);break;case"s":a=b.getSeconds();break;case"t":case"tt":a=b.getHours()<12?c.amDesignator:c.pmDesignator;if(e=="t")a=a.charAt(0);break;case"fff":a=ss.padLeftString(b.getMilliseconds().toString(),3,48);break;case"ff":a=ss.padLeftString(b.getMilliseconds().toString(),3).substr(0,2);break;case"f":a=ss.padLeftString(b.getMilliseconds().toString(),3).charAt(0);break;case"z":a=b.getTimezoneOffset()/60;a=(a>=0?"-":"+")+Math.floor(Math.abs(a));break;case"zz":case"zzz":a=b.getTimezoneOffset()/60;a=(a>=0?"-":"+")+Math.floor(ss.padLeftString(Math.abs(a)).toString(),2,48);if(e=="zzz")a+=c.timeSeparator+Math.abs(ss.padLeftString(b.getTimezoneOffset()%60).toString(),2,48);break;default:if(a.charAt(0)=="'")a=a.substr(1,a.length-2).replace(/\\'/g,"'")}h.append(a)}return h.toString()};ss._parseExactDate=function(c,i,p,s){p=p||ss_CultureInfo.CurrentCulture;var n=p.amDesignator,o=p.pmDesignator,r=function(b){for(var c="1234567890",a=0;a<b.length;a++)if(c.indexOf(b.charAt(a))==-1)return false;return true},h=function(f,d,c,e){for(var b=e;b>=c;b--){var a=f.substring(d,d+b);if(a.length<c)return null;if(r(a))return a}return null};c=c+"";i=i+"";var b=0,m=0,q="",a="",e=0,f=1,g=1,d=0,k=0,j=0,l="";while(m<i.length){q=i.charAt(m);a="";while(i.charAt(m)==q&&m<i.length)a+=i.charAt(m++);if(a=="yyyy"||a=="yy"||a=="y"){if(a=="yyyy")e=h(c,b,4,4);if(a=="yy")e=h(c,b,2,2);if(a=="y")e=h(c,b,2,4);if(e==null)return null;b+=e.length;if(e.length==2)if(e>30)e=1900+(e-0);else e=2e3+(e-0)}else if(a=="MM"||a=="M"){f=h(c,b,a.length,2);if(f==null||f<1||f>12)return null;b+=f.length}else if(a=="dd"||a=="d"){g=h(c,b,a.length,2);if(g==null||g<1||g>31)return null;b+=g.length}else if(a=="hh"||a=="h"){d=h(c,b,a.length,2);if(d==null||d<1||d>12)return null;b+=d.length}else if(a=="HH"||a=="H"){d=h(c,b,a.length,2);if(d==null||d<0||d>23)return null;b+=d.length}else if(a=="mm"||a=="m"){k=h(c,b,a.length,2);if(k==null||k<0||k>59)return null;b+=k.length}else if(a=="ss"||a=="s"){j=h(c,b,a.length,2);if(j==null||j<0||j>59)return null;b+=j.length}else if(a=="t"){if(c.substring(b,b+1).toLowerCase()==n.charAt(0).toLowerCase())l=n;else if(c.substring(b,b+1).toLowerCase()==o.charAt(0).toLowerCase())l=o;else return null;b+=1}else if(a=="tt"){if(c.substring(b,b+2).toLowerCase()==n.toLowerCase())l=n;else if(c.substring(b,b+2).toLowerCase()==o.toLowerCase())l=o;else return null;b+=2}else if(c.substring(b,b+a.length)!=a)return null;else b+=a.length}if(b!=c.length)return null;if(f==2)if(e%4==0&&e%100!=0||e%400==0){if(g>29)return null}else if(g>28)return null;if(f==4||f==6||f==9||f==11)if(g>30)return null;if(d<12&&l==o)d=d-0+12;else if(d>11&&l==n)d-=12;return s?new Date(Date.UTC(e,f-1,g,d,k,j)):new Date(e,f-1,g,d,k,j)};ss.parseExactDate=function(c,b,a){return ss._parseExactDate(c,b,a,false)};ss.parseExactDateUTC=function(c,b,a){return ss._parseExactDate(c,b,a,true)};ss._delegateContains=function(b,d,c){for(var a=0;a<b.length;a+=2)if(b[a]===d&&b[a+1]===c)return true;return false};ss._mkdel=function(a){var b=function(){if(a.length==2)return a[1].apply(a[0],arguments);else{for(var c=ss.arrayClone(a),b=0;b<c.length;b+=2)ss._delegateContains(a,c[b],c[b+1])&&c[b+1].apply(c[b],arguments);return null}};b._targets=a;return b};ss.mkdel=function(b,a){return!b?a:ss._mkdel([b,a])};ss.delegateCombine=function(a,b){if(!a)return!b._targets?ss.mkdel(null,b):b;if(!b)return!a._targets?ss.mkdel(null,a):a;var c=a._targets?a._targets:[null,a],d=b._targets?b._targets:[null,b];return ss._mkdel(c.concat(d))};ss.delegateRemove=function(b,a){if(!b||b===a)return null;if(!a)return b;var c=b._targets,f=null,e;if(a._targets){f=a._targets[0];e=a._targets[1]}else e=a;for(var d=0;d<c.length;d+=2)if(c[d]===f&&c[d+1]===e){if(c.length==2)return null;var g=ss.arrayClone(c);g.splice(d,2);return ss._mkdel(g)}return b};ss.delegateEquals=function(a,b){if(a===b)return true;if(!a._targets&&!b._targets)return false;var d=a._targets||[null,a],e=b._targets||[null,b];if(d.length!=e.length)return false;for(var c=0;c<d.length;c++)if(d[c]!==e[c])return false;return true};ss.delegateClone=function(a){return a._targets?ss._mkdel(a._targets):function(){return a.apply(this,arguments)}};ss.thisFix=function(a){return function(){for(var c=[this],b=0;b<arguments.length;b++)c.push(arguments[b]);return a.apply(a,c)}};ss.getInvocationList=function(a){if(!a._targets)return[a];for(var c=[],b=0;b<a._targets.length;b+=2)c.push(ss.mkdel(a._targets[b],a._targets[b+1]));return c};ss.Debug=global.Debug||function(){};ss.Debug.__typeName="Debug";if(!ss.Debug.writeln)ss.Debug.writeln=function(a){if(global.console){if(global.console.debug){global.console.debug(a);return}else if(global.console.log){global.console.log(a);return}}else if(global.opera&&global.opera.postError){global.opera.postError(a);return}};ss.Debug._fail=function(a){ss.Debug.writeln(a);eval("debugger;")};ss.Debug.assert=function(b,a){if(!b){a="Assert failed: "+a;confirm(a+"\r\n\r\nBreak into debugger?")&&ss.Debug._fail(a)}};ss.Debug.fail=function(a){ss.Debug._fail(a)};var ss_Enum=function(){};ss.registerClass(global,"ss.Enum",ss_Enum);ss_Enum.parse=function(d,i){var a=d.prototype;if(!d.__flags){for(var b in a)if(b===i)return a[b]}else{for(var g=i.split("|"),h=0,e=true,c=g.length-1;c>=0;c--){var j=g[c].trim(),f=false;for(var b in a)if(b===j){h|=a[b];f=true;break}if(!f){e=false;break}}if(e)return h}throw"Invalid Enumeration Value";};ss_Enum.toString=function(e,d){var a=e.prototype;if(!e.__flags||d===0){for(var b in a)if(a[b]===d)return b;throw"Invalid Enumeration Value";}else{var c=[];for(var b in a)a[b]&d&&ss.add(c,b);if(!c.length)throw"Invalid Enumeration Value";return c.join(" | ")}};var ss_CultureInfo=function(c,a,b){this.name=c;this.numberFormat=a;this.dateFormat=b};ss.registerClass(global,"ss.CultureInfo",ss_CultureInfo);ss_CultureInfo.InvariantCulture=new ss_CultureInfo("en-US",{naNSymbol:"NaN",negativeSign:"-",positiveSign:"+",negativeInfinityText:"-Infinity",positiveInfinityText:"Infinity",percentSymbol:"%",percentGroupSizes:[3],percentDecimalDigits:2,percentDecimalSeparator:".",percentGroupSeparator:",",percentPositivePattern:"{0} %",percentNegativePattern:"-{0} %",currencySymbol:"$",currencyGroupSizes:[3],currencyDecimalDigits:2,currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyNegativePattern:"(${0})",currencyPositivePattern:"${0}",numberGroupSizes:[3],numberDecimalDigits:2,numberDecimalSeparator:".",numberGroupSeparator:","},{amDesignator:"AM",pmDesignator:"PM",dateSeparator:"/",timeSeparator:":",gmtDateTimePattern:"ddd, dd MMM yyyy HH:mm:ss 'GMT'",universalDateTimePattern:"yyyy-MM-dd HH:mm:ssZ",sortableDateTimePattern:"yyyy-MM-ddTHH:mm:ss",dateTimePattern:"dddd, MMMM dd, yyyy h:mm:ss tt",longDatePattern:"dddd, MMMM dd, yyyy",shortDatePattern:"M/d/yyyy",longTimePattern:"h:mm:ss tt",shortTimePattern:"h:mm tt",firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minimizedDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]});ss_CultureInfo.CurrentCulture=ss_CultureInfo.InvariantCulture;var ss_IEnumerator=function(){};ss_IEnumerator.prototype={current:null,moveNext:null,reset:null};ss.registerInterface(global,"ss.IEnumerator",ss_IEnumerator,ss_IDisposable);var ss_IEnumerable=function(){};ss_IEnumerable.prototype={getEnumerator:null};ss.registerInterface(global,"ss.IEnumerable",ss_IEnumerable);ss.getEnumerator=function(a){return ss.isArray(a)?new ss_ArrayEnumerator(a):a.getEnumerator()};var ss_ICollection=function(){};ss_ICollection.prototype={get_count:null,add:null,clear:null,contains:null,remove:null};ss.registerInterface(global,"ss.ICollection",ss_IEnumerable);ss.count=function(a){return ss.isArray(a)?a.length:a.get_count()};ss.add=function(a,b){ss.isArray(a)?a.push(b):a.add(b)};ss.clear=function(a){ss.isArray(a)?(a.length=0):a.clear()};ss.remove=function(a,c){if(ss.isArray(a)){var b=ss.indexOf(a,c);if(b>=0){a.splice(b,1);return true}return false}else return a.remove(c)};ss.contains=function(a,b){return ss.isArray(a)?ss.indexOf(a,b)>=0:a.contains(b)};var ss_IEqualityComparer=function(){};ss_IEqualityComparer.prototype={areEqual:null,getObjectHashCode:null};ss.registerInterface(global,"ss.IEqualityComparer",ss_IEqualityComparer);var ss_IComparer=function(){};ss_IComparer.prototype={compare:null};ss.registerInterface(global,"ss.IComparer",ss_IComparer);var ss_Nullable=function(){};ss.registerClass(global,"ss.Nullable",ss_Nullable);ss_Nullable.unbox=function(a){if(!ss.isValue(a))throw"Instance is null";return a};ss_Nullable.eq=function(a,b){return!ss.isValue(a)?!ss.isValue(b):a===b};ss_Nullable.ne=function(a,b){return!ss.isValue(a)?ss.isValue(b):a!==b};ss_Nullable.le=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a<=b};ss_Nullable.ge=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a>=b};ss_Nullable.lt=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a<b};ss_Nullable.gt=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a>b};ss_Nullable.sub=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a-b:null};ss_Nullable.add=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a+b:null};ss_Nullable.mod=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a%b:null};ss_Nullable.div=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a/b:null};ss_Nullable.mul=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a*b:null};ss_Nullable.band=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a&b:null};ss_Nullable.bor=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a|b:null};ss_Nullable.xor=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a^b:null};ss_Nullable.shl=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a<<b:null};ss_Nullable.srs=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a>>b:null};ss_Nullable.sru=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a>>>b:null};ss_Nullable.and=function(a,b){return a===true&&b===true?true:a===false||b===false?false:null};ss_Nullable.or=function(a,b){return a===true||b===true?true:a===false&&b===false?false:null};ss_Nullable.not=function(a){return ss.isValue(a)?!a:null};ss_Nullable.neg=function(a){return ss.isValue(a)?-a:null};ss_Nullable.pos=function(a){return ss.isValue(a)?+a:null};ss_Nullable.cpl=function(a){return ss.isValue(a)?~a:null};var ss_IList=function(){};ss_IList.prototype={get_item:null,set_item:null,indexOf:null,insert:null,removeAt:null};ss.registerInterface(global,"ss.IList",ss_IList,ss_ICollection,ss_IEnumerable);ss.getItem=function(a,b){return ss.isArray(a)?a[b]:a.get_item(b)};ss.setItem=function(a,b,c){ss.isArray(a)?(a[b]=c):a.set_item(b,c)};ss.indexOf=function(a,c){if(ss.isArray(a)){for(var b=0;b<a.length;b++)if(ss.staticEquals(a[b],c))return b;return-1}else return a.indexOf(c)};ss.insert=function(a,b,c){ss.isArray(a)?a.splice(b,0,c):a.insert(b,c)};ss.removeAt=function(a,b){ss.isArray(a)?a.splice(b,1):a.removeAt(b)};var ss_IDictionary=function(){};ss_IDictionary.prototype={get_item:null,set_item:null,get_keys:null,get_values:null,containsKey:null,add:null,remove:null,tryGetValue:null};ss.registerInterface(global,"ss.IDictionary",ss_IDictionary,[ss_IEnumerable]);var ss_Int32=function(){};ss.registerClass(global,"ss.Int32",ss_Int32,Object,[ss_IEquatable,ss_IComparable,ss_IFormattable]);ss_Int32.__class=false;ss_Int32.isInstanceOfType=function(a){return typeof a==="number"&&isFinite(a)&&Math.round(a,0)==a};ss_Int32.getDefaultValue=ss_Int32.createInstance=function(){return 0};ss_Int32.div=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a/b|0:null};ss_Int32.trunc=function(a){return ss.isValue(a)?a|0:null};var ss_JsDate=function(){};ss.registerClass(global,"ss.JsDate",ss_JsDate,Object,[ss_IEquatable,ss_IComparable]);ss_JsDate.createInstance=function(){return new Date};ss_JsDate.isInstanceOfType=function(a){return a instanceof Date};var ss_ArrayEnumerator=function(a){this._array=a;this._index=-1};ss_ArrayEnumerator.prototype={moveNext:function(){this._index++;return this._index<this._array.length},reset:function(){this._index=-1},current:function(){if(this._index<0||this._index>=this._array.length)throw"Invalid operation";return this._array[this._index]},dispose:function(){}};ss.registerClass(global,"ss.ArrayEnumerator",ss_ArrayEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_ObjectEnumerator=function(a){this._keys=Object.keys(a);this._index=-1;this._object=a};ss_ObjectEnumerator.prototype={moveNext:function(){this._index++;return this._index<this._keys.length},reset:function(){this._index=-1},current:function(){if(this._index<0||this._index>=this._keys.length)throw"Invalid operation";var a=this._keys[this._index];return{key:a,value:this._object[a]}},dispose:function(){}};ss.registerClass(global,"ss.ObjectEnumerator",ss_ObjectEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_EqualityComparer=function(){};ss_EqualityComparer.prototype.areEqual=function(a,b){return ss.staticEquals(a,b)};ss_EqualityComparer.prototype.getObjectHashCode=function(a){return ss.isValue(a)?ss.getHashCode(a):0};ss.registerClass(global,"ss.EqualityComparer",ss_EqualityComparer,null,ss_IEqualityComparer);ss_EqualityComparer.def=new ss_EqualityComparer;var ss_Comparer=function(a){this.f=a};ss_Comparer.prototype.compare=function(a,b){return this.f(a,b)};ss_Comparer.create=function(a){return new ss_Comparer(a)};ss.registerClass(global,"ss.Comparer",ss_Comparer,null,ss_IComparer);ss_Comparer.def=new ss_Comparer(ss.compare);var ss_$DictionaryCollection=function(b,a){this._dict=b;this._isKeys=a};ss_$DictionaryCollection.prototype={get_count:function(){return this._dict.get_count()},contains:function(d){if(this._isKeys)return this._dict.containsKey(d);else{for(var c in this._dict.buckets)if(this._dict.buckets.hasOwnProperty(c))for(var b=this._dict.buckets[c],a=0;a<b.length;a++)if(this._dict.comparer.areEqual(b[a].value,d))return true;return false}},getEnumerator:function(){return this._dict._getEnumerator(this._isKeys?function(a){return a.key}:function(a){return a.value})},add:function(){throw"Collection is read-only";},clear:function(){throw"Collection is read-only";},remove:function(){throw"Collection is read-only";}};var ss_Dictionary$2=function(c,b){var a=function(a,f){this.countField=0;this.buckets={};this.comparer=f||ss_EqualityComparer.def;if(ss.isInstanceOfType(a,ss_IDictionary)){var b=ss.getEnumerator(a);try{while(b.moveNext()){var e=b.current();this.add(e.key,e.value)}}finally{ss.isInstanceOfType(b,ss_IDisposable)&&ss.cast(b,ss_IDisposable).dispose()}}else if(a)for(var d=Object.keys(a),c=0;c<d.length;c++)this.add(d[c],a[d[c]])};a.prototype={_setOrAdd:function(b,f,g){var e=this.comparer.getObjectHashCode(b),d={key:b,value:f};if(this.buckets.hasOwnProperty(e)){for(var a=this.buckets[e],c=0;c<a.length;c++)if(this.comparer.areEqual(a[c].key,b)){if(g)throw"Key "+b+" already exists.";a[c]=d;return}a.push(d)}else this.buckets[e]=[d];this.countField++},add:function(b,a){this._setOrAdd(b,a,true)},set_item:function(b,a){this._setOrAdd(b,a,false)},_get:function(e){var d=this.comparer.getObjectHashCode(e);if(this.buckets.hasOwnProperty(d))for(var c=this.buckets[d],b=0;b<c.length;b++){var a=c[b];if(this.comparer.areEqual(a.key,e))return a.value!==undefined?a.value:null}return undefined},get_item:function(a){var b=this._get(a);if(b===undefined)throw"Key "+a+" does not exist.";return b},tryGetValue:function(d,a){var c=this._get(d);if(c!==undefined){a.$=c;return true}else{a.$=ss.getDefaultValue(b);return false}},containsKey:function(d){var c=this.comparer.getObjectHashCode(d);if(!this.buckets.hasOwnProperty(c))return false;for(var b=this.buckets[c],a=0;a<b.length;a++)if(this.comparer.areEqual(b[a].key,d))return true;return false},clear:function(){this.countField=0;this.buckets={}},remove:function(d){var c=this.comparer.getObjectHashCode(d);if(!this.buckets.hasOwnProperty(c))return false;for(var a=this.buckets[c],b=0;b<a.length;b++)if(this.comparer.areEqual(a[b].key,d)){a.splice(b,1);if(a.length==0)delete this.buckets[c];this.countField--;return true}return false},get_count:function(){return this.countField},_getEnumerator:function(d){var c=Object.keys(this.buckets),a=-1,b;return new ss_IteratorBlockEnumerator(function(){if(a<0||b>=this.buckets[c[a]].length-1){b=-1;a++}if(a>=c.length)return false;b++;return true},function(){return d(this.buckets[c[a]][b])},null,this)},get_keys:function(){return new ss_$DictionaryCollection(this,true)},get_values:function(){return new ss_$DictionaryCollection(this,false)},getEnumerator:function(){return this._getEnumerator(function(a){return a})}};ss.registerGenericClassInstance(a,ss_Dictionary$2,[c,b],function(){return null},function(){return[ss_IDictionary,ss_IEnumerable]});return a};ss.registerGenericClass(global,"ss.Dictionary$2",ss_Dictionary$2,2);ss.registerClass(global,"ss.$DictionaryCollection",ss_$DictionaryCollection,null,[ss_IEnumerable,ss_ICollection]);var ss_IDisposable=function(){};ss_IDisposable.prototype={dispose:null};ss.registerInterface(global,"ss.IDisposable",ss_IDisposable);var ss_StringBuilder=function(a){this._parts=ss.isNullOrUndefined(a)||a===""?[]:[a];this.isEmpty=this._parts.length==0};ss_StringBuilder.prototype={append:function(a){if(!ss.isNullOrUndefined(a)&&a!==""){ss.add(this._parts,a);this.isEmpty=false}return this},appendChar:function(a){return this.append(String.fromCharCode(a))},appendLine:function(a){this.append(a);this.append("\r\n");this.isEmpty=false;return this},appendLineChar:function(a){return this.appendLine(String.fromCharCode(a))},clear:function(){this._parts=[];this.isEmpty=true},toString:function(){return this._parts.join("")}};ss.registerClass(global,"ss.StringBuilder",ss_StringBuilder);var ss_EventArgs=function(){};ss.registerClass(global,"ss.EventArgs",ss_EventArgs);ss_EventArgs.Empty=new ss_EventArgs;var ss_Exception=function(b,a){this._message=b||null;this._innerException=a||null};ss.registerClass(global,"ss.Exception",ss_Exception);ss_Exception.prototype={get_message:function(){return this._message},get_innerException:function(){return this._innerException}};ss_Exception.wrap=function(a){return ss.isInstanceOfType(a,ss_Exception)?a:a instanceof Error?new ss_JsErrorException(a):new ss_Exception(a.toString())};var ss_NotSupportedException=function(b,a){ss_Exception.call(this,b,a)};ss.registerClass(global,"ss.NotSupportedException",ss_NotSupportedException,ss_Exception);var ss_AggregateException=function(b,a){if(typeof b!=="string"){a=b;b="One or more errors occurred."}a=ss.isValue(a)?ss.arrayFromEnumerable(a):null;ss_Exception.call(this,b,a&&a.length?a[0]:null);this._innerExceptions=a};ss_AggregateException.prototype={get_innerExceptions:function(){return this._innerExceptions}};ss.registerClass(global,"ss.AggregateException",ss_AggregateException,ss_Exception);var ss_PromiseException=function(a){ss_Exception.call(this,a[0]?a[0].toString():"An error occurred");this._arguments=ss.arrayClone(a)};ss_PromiseException.prototype={get_arguments:function(){return this._arguments}};ss.registerClass(global,"ss.PromiseException",ss_PromiseException,ss_Exception);var ss_JsErrorException=function(a){ss_Exception.call(this,a.message);this._error=a};ss_JsErrorException.prototype={get_error:function(){return this._error}};ss.registerClass(global,"ss.JsErrorException",ss_JsErrorException,ss_Exception);var ss_IteratorBlockEnumerable=function(a,b){this._getEnumerator=a;this._this=b};ss_IteratorBlockEnumerable.prototype={getEnumerator:function(){return this._getEnumerator.call(this._this)}};ss.registerClass(global,"ss.IteratorBlockEnumerable",ss_IteratorBlockEnumerable,null,ss_IEnumerable);var ss_IteratorBlockEnumerator=function(b,a,c,d){this._moveNext=b;this._getCurrent=a;this._dispose=c;this._this=d};ss_IteratorBlockEnumerator.prototype={moveNext:function(){try{return this._moveNext.call(this._this)}catch(a){this._dispose&&this._dispose.call(this._this);throw a;}},current:function(){return this._getCurrent.call(this._this)},reset:function(){throw new ss_NotSupportedException("Reset is not supported.");},dispose:function(){this._dispose&&this._dispose.call(this._this)}};ss.registerClass(global,"ss.IteratorBlockEnumerator",ss_IteratorBlockEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_Lazy=function(a){this._valueFactory=a;this.isValueCreated=false};ss_Lazy.prototype.value=function(){if(!this.isValueCreated){this._value=this._valueFactory();delete this._valueFactory;this.isValueCreated=true}return this._value};ss.registerClass(global,"ss.Lazy",ss_Lazy);var ss_Task=function(a,b){this._action=a;this._state=b;this.exception=null;this.status=0;this._thens=[];this._result=null};ss_Task.prototype={continueWith:function(c){var a=new ss_TaskCompletionSource,d=this,b=function(){try{a.setResult(c(d))}catch(b){a.setException(ss_Exception.wrap(b))}};if(this.isCompleted())setTimeout(b,0);else this._thens.push(b);return a.task},start:function(){if(this.status!==0)throw"Task was already started.";var a=this;this.status=3;setTimeout(function(){try{var b=a._action(a._state);delete a._action;delete a._state;a._complete(b)}catch(c){a._fail(new ss_AggregateException([ss_Exception.wrap(c)]))}},0)},_runCallbacks:function(){for(var a=0;a<this._thens.length;a++)this._thens[a](this);delete this._thens},_complete:function(a){if(this.isCompleted())return false;this._result=a;this.status=5;this._runCallbacks();return true},_fail:function(a){if(this.isCompleted())return false;this.exception=a;this.status=7;this._runCallbacks();return true},_cancel:function(){if(this.isCompleted())return false;this.status=6;this._runCallbacks();return true},isCanceled:function(){return this.status===6},isCompleted:function(){return this.status>=5},isFaulted:function(){return this.status===7},getResult:function(){switch(this.status){case 5:return this._result;case 6:throw"Task was cancelled.";case 7:throw this.exception;default:throw"Task is not yet completed.";}},dispose:function(){}};ss_Task.delay=function(b){var a=new ss_TaskCompletionSource;setTimeout(function(){a.setResult(0)},b);return a.task};ss_Task.fromResult=function(b){var a=new ss_Task;a.status=5;a._result=b;return a};ss_Task.run=function(b){var a=new ss_TaskCompletionSource;setTimeout(function(){try{a.setResult(b())}catch(c){a.setException(ss_Exception.wrap(c))}},0);return a.task};ss_Task.whenAll=function(a){var b=new ss_TaskCompletionSource;if(a.length===0)b.setResult([]);else for(var f=new Array(a.length),g=a.length,e=false,c=[],d=0;d<a.length;d++)(function(d){a[d].continueWith(function(a){switch(a.status){case 5:f[d]=a.getResult();break;case 6:e=true;break;case 7:ss.arrayAddRange(c,a.exception.get_innerExceptions());break;default:throw"Invalid task status "+a.status;}if(--g===0)if(c.length>0)b.setException(c);else if(e)b.setCanceled();else b.setResult(f)})})(d);return b.task};ss_Task.whenAny=function(b){if(!b.length)throw"Must wait for at least one task";for(var a=new ss_TaskCompletionSource,c=0;c<b.length;c++)b[c].continueWith(function(b){switch(b.status){case 5:a.trySetResult(b);break;case 6:a.trySetCanceled();break;case 7:a.trySetException(b.exception.get_innerExceptions());break;default:throw"Invalid task status "+b.status;}});return a.task};ss_Task.fromDoneCallback=function(e,b,d){var c=new ss_TaskCompletionSource,a;if(typeof b==="number"){a=Array.prototype.slice.call(arguments,3);if(b<0)b+=a.length+1}else{a=Array.prototype.slice.call(arguments,2);d=b;b=a.length}var f=function(a){c.setResult(a)};a=a.slice(0,b).concat(f,a.slice(b));e[d].apply(e,a);return c.task};ss_Task.fromPromise=function(c,a){var b=new ss_TaskCompletionSource;if(typeof a==="number")a=function(a){return function(){return arguments[a>=0?a:arguments.length+a]}}(a);else if(typeof a!=="function")a=function(){return Array.prototype.slice.call(arguments,0)};c.then(function(){b.setResult(typeof a==="function"?a.apply(null,arguments):null)},function(){b.setException(new ss_PromiseException(Array.prototype.slice.call(arguments,0)))});return b.task};ss_Task.fromNode=function(e,b,d){var c=new ss_TaskCompletionSource,a;if(typeof b==="function")a=Array.prototype.slice.call(arguments,3);else{a=Array.prototype.slice.call(arguments,2);d=b;b=function(){return arguments[0]}}var f=function(a){if(a)c.setException(ss_Exception.wrap(a));else c.setResult(b.apply(null,Array.prototype.slice.call(arguments,1)))};a.push(f);e[d].apply(e,a);return c.task};ss.registerClass(global,"ss.Task",ss_Task,null,ss_IDisposable);var ss_TaskStatus=function(){};ss_TaskStatus.prototype={created:0,running:3,ranToCompletion:5,canceled:6,faulted:7};ss.registerEnum(global,"ss.TaskStatus",ss_TaskStatus,false);var ss_TaskCompletionSource=function(){this.task=new ss_Task;this.task.status=3};ss_TaskCompletionSource.prototype={setCanceled:function(){if(!this.task._cancel())throw"Task was already completed.";},setResult:function(a){if(!this.task._complete(a))throw"Task was already completed.";},setException:function(a){if(!this.trySetException(a))throw"Task was already completed.";},trySetCanceled:function(){return this.task._cancel()},trySetResult:function(a){return this.task._complete(a)},trySetException:function(a){if(!ss.isInstanceOfType(a,ss_AggregateException)){if(ss.isInstanceOfType(a,ss_Exception))a=[a];a=new ss_AggregateException(a)}return this.task._fail(a)}};ss.registerClass(global,"ss.TaskCompletionSource",ss_TaskCompletionSource);var ss_CancelEventArgs=function(){ss_CancelEventArgs.call(this);this.cancel=false};ss.registerClass(global,"ss.CancelEventArgs",ss_CancelEventArgs,ss_EventArgs);if(global.ss){for(var n in ss)if(ss.hasOwnProperty(n))global.ss[n]=ss[n]}else global.ss=ss