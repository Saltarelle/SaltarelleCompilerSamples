if(typeof global==="undefined")global=window;var ss={};ss.isUndefined=function(a){return a===undefined};ss.isNull=function(a){return a===null};ss.isNullOrUndefined=function(a){return a===null||a===undefined};ss.isValue=function(a){return a!==null&&a!==undefined};ss.referenceEquals=function(a,b){return ss.isValue(a)?a===b:!ss.isValue(b)};ss.mkdict=function(a){a=arguments.length!=1?arguments:arguments[0];for(var c={},b=0;b<a.length;b+=2)c[a[b]]=a[b+1];return c};ss.coalesce=function(a,b){return ss.isValue(a)?a:b};if(typeof window=="object"){if(!window.Element){window.Element=function(){};window.Element.isInstanceOfType=function(a){return a&&typeof a.constructor==="undefined"&&typeof a.tagName==="string"}}window.Element.__typeName="Element";window.Element.__baseType=Object;if(!window.XMLHttpRequest)window.XMLHttpRequest=function(){for(var b=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"],a=0;a<b.length;a++)try{return new ActiveXObject(b[a])}catch(d){}return null};ss.parseXml=function(d){try{if(DOMParser){var e=new DOMParser;return e.parseFromString(d,"text/xml")}else for(var c=["Msxml2.DOMDocument.3.0","Msxml2.DOMDocument"],b=0;b<c.length;b++){var a=new ActiveXObject(c[b]);a.async=false;a.loadXML(d);a.setProperty("SelectionLanguage","XPath");return a}}catch(f){}return null}}global.Type=Function;Type.registerType=function(g,f,h){for(var b=g,a=f.split("."),d=0;d<a.length-1;d++){var e=a[d],c=b[e];if(!c)b[e]=c={};b=c}b[a[a.length-1]]=h};Type.__genericCache={};Type._makeGenericTypeName=function(d,c){for(var b=d.__typeName,a=0;a<c.length;a++)b+=(a===0?"[":",")+c[a].__typeName;b+="]";return b};Type.makeGenericType=function(b,a){var c=Type._makeGenericTypeName(b,a);return Type.__genericCache[c]||b.apply(null,a)};Type.prototype.registerGenericClassInstance=function(a,c,b,f,e){var d=Type._makeGenericTypeName(c,b);Type.__genericCache[d]=a;a.__genericTypeDefinition=c;a.__typeArguments=b;Type.registerClass(null,d,a,f(),e())};Type.registerGenericInterfaceInstance=function(a,c,b,e){var d=Type._makeGenericTypeName(c,b);Type.__genericCache[d]=a;a.__genericTypeDefinition=c;a.__typeArguments=b;Type.registerInterface(null,d,a,e())};Type.prototype.get_isGenericTypeDefinition=function(){return this.__isGenericTypeDefinition||false};Type.prototype.getGenericTypeDefinition=function(){return this.__genericTypeDefinition||null};Type.prototype.get_genericParameterCount=function(){return this.__typeArgumentCount||0};Type.prototype.getGenericArguments=function(){return this.__typeArguments||null};Type.registerClass=function(f,e,a,c,b){f&&Type.registerType(f,e,a);a.prototype.constructor=a;a.__typeName=e;a.__class=true;a.__baseType=c||Object;c&&a.setupBase(c);if(b instanceof Array)a.__interfaces=b;else if(b){a.__interfaces=[];for(var d=4;d<arguments.length;d++){b=arguments[d];a.__interfaces.add(b)}}};Type.registerGenericClass=function(c,b,a,d){c&&Type.registerType(c,b,a);a.prototype.constructor=a;a.__typeName=b;a.__class=true;a.__typeArgumentCount=d;a.__isGenericTypeDefinition=true;a.__baseType=Object};Type.registerInterface=function(e,d,a,b){e&&Type.registerType(e,d,a);a.__typeName=d;a.__interface=true;if(b instanceof Array)a.__interfaces=b;else if(b){a.__interfaces=[];for(var c=3;c<arguments.length;c++)a.__interfaces.add(arguments[c])}};Type.registerGenericInterface=function(c,b,a,d){c&&Type.registerType(c,b,a);a.prototype.constructor=a;a.__typeName=b;a.__interface=true;a.__typeArgumentCount=d;a.__isGenericTypeDefinition=true};Type.prototype.registerEnum=function(d,c,a,e){d&&Type.registerType(d,c,a);for(var b in a.prototype)a[b]=a.prototype[b];a.__typeName=c;a.__enum=true;if(e)a.__flags=true;a.getDefaultValue=a.createInstance=function(){return 0};a.isInstanceOfType=function(a){return typeof a=="number"}};Type.prototype.setupBase=function(){var b=this.__baseType;for(var a in b.prototype){var c=b.prototype[a];if(!this.prototype[a])this.prototype[a]=c}};if(!Type.prototype.resolveInheritance)Type.prototype.resolveInheritance=Type.prototype.setupBase;Type.prototype.get_baseType=function(){return this.__baseType||null};Type.prototype.get_fullName=function(){return this.__typeName};Type.prototype.get_name=function(){var a=this.__typeName,b=a.lastIndexOf(".");return b>0?a.substr(b+1):a};Type.prototype.getInterfaces=function(){return this.__interfaces};Type.prototype.isInstanceOfType=function(a){if(ss.isNullOrUndefined(a))return false;if(this==Object||a instanceof this)return true;var b=Type.getInstanceType(a);return this.isAssignableFrom(b)};Type.isInstanceOfType=function(b,a){return b instanceof a||a!==Function&&a.isInstanceOfType&&a.isInstanceOfType(b)};Type.prototype.isAssignableFrom=function(c){if(this==Object||this==c)return true;if(this.__class){var a=c.__baseType;while(a){if(this==a)return true;a=a.__baseType}}else if(this.__interface){var b=c.__interfaces;if(b&&b.contains(this))return true;var a=c.__baseType;while(a){b=a.__interfaces;if(b&&b.contains(this))return true;a=a.__baseType}}return false};Type.hasProperty=function(a,b){return typeof a["get_"+b]==="function"||typeof a["set_"+b]==="function"};Type.prototype.get_isClass=function(){return this.__class==true};Type.prototype.get_isEnum=function(){return this.__enum==true};Type.prototype.get_isFlags=function(){return this.__enum==true&&this.__flags==true};Type.prototype.get_isInterface=function(){return this.__interface==true};Type.canCast=function(a,b){return Type.isInstanceOfType(a,b)};Type.safeCast=function(a,b){return Type.isInstanceOfType(a,b)?a:null};Type.cast=function(a,b){if(a===null)return null;else if(typeof a==="undefined"||Type.isInstanceOfType(a,b))return a;throw"Cannot cast object to type "+b.__typeName;};Type.getInstanceType=function(b){if(b===null)throw"Cannot get type of null";if(typeof b==="undefined")throw"Cannot get type of undefined";var a=null;try{a=b.constructor}catch(c){}if(!a||!a.__typeName)a=Object;return a};Type.getType=function(b){if(!b)return null;if(!Type.__typeCache)Type.__typeCache={};var a=Type.__typeCache[b];if(!a){for(var c=b.split(","),a=c.length>1?require(c[1].trim):global,e=c[0].trim().split("."),d=0;d<e.length;d++){a=a[e[d]];if(!a)break}Type.__typeCache[b]=a||null}return a};Type.prototype.getDefaultValue=function(){return null};Type.prototype.createInstance=function(){return new this};Type.parse=function(a){return Type.getType(a)};Object.__typeName="Object";Object.__baseType=null;Object.__class=true;Object.clearKeys=function(a){for(var b in a)if(a.hasOwnProperty(b))delete a[b]};Object.keyExists=function(b,a){return b[a]!==undefined};if(!Object.keys){Object.keys=function(b){var a=[];for(var c in b)b.hasOwnProperty(c)&&a.push(c);return a};Object.getKeyCount=function(b){var a=0;for(var c in b)if(b.hasOwnProperty(c))a++;return a}}else Object.getKeyCount=function(a){return Object.keys(a).length};Object.getObjectEnumerator=function(a){return new ss_ObjectEnumerator(a)};Boolean.__typeName="Boolean";Boolean.__baseType=Object;Boolean.getDefaultValue=Boolean.createInstance=function(){return false};Boolean.parse=function(a){return a.toLowerCase()=="true"};Boolean.prototype.getHashCode=function(){return this==true?1:0};Boolean.prototype.equals=function(a){return this==a};Number.__typeName="Number";Number.__baseType=Object;Number.getDefaultValue=Number.createInstance=function(){return 0};Number.prototype.getHashCode=function(){var a=this.toExponential();a=a.substr(0,a.indexOf("e"));return parseInt(a.replace(".",""),10)&4294967295};Number.prototype.equals=function(a){return this==a};Number.parse=function(a){return!a||!a.length?0:a.indexOf(".")>=0||a.indexOf("e")>=0||a.endsWith("f")||a.endsWith("F")?parseFloat(a):parseInt(a,10)};Number.prototype.format=function(a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?this.toString():this._netFormat(a,false)};Number.prototype.localeFormat=function(a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?this.toLocaleString():this._netFormat(a,true)};Number._commaFormat=function(a,j,n,o){var c=null,h=a.indexOf(n);if(h>0){c=a.substr(h);a=a.substr(0,h)}var i=a.startsWith("-");if(i)a=a.substr(1);var f=0,g=j[f];if(a.length<g)return(i?"-":"")+(c?a+c:a);var k=a.length,b="",l=false;while(!l){var e=g,d=k-e;if(d<0){g+=d;e+=d;d=0;l=true}if(!e)break;var m=a.substr(d,e);if(b.length)b=m+o+b;else b=m;k-=e;if(f<j.length-1){f++;g=j[f]}}if(i)b="-"+b;return c?b+c:b};Number.prototype._netFormat=function(f,g){var b=g?ss_CultureInfo.CurrentCulture.numberFormat:ss_CultureInfo.InvariantCulture.numberFormat,a="",c=-1;if(f.length>1)c=parseInt(f.substr(1));var e=f.charAt(0);switch(e){case"d":case"D":a=parseInt(Math.abs(this)).toString();if(c!=-1)a=a.padLeft(c,48);if(this<0)a="-"+a;break;case"x":case"X":a=parseInt(Math.abs(this)).toString(16);if(e=="X")a=a.toUpperCase();if(c!=-1)a=a.padLeft(c,48);break;case"e":case"E":if(c==-1)a=this.toExponential();else a=this.toExponential(c);if(e=="E")a=a.toUpperCase();break;case"f":case"F":case"n":case"N":if(c==-1)c=b.numberDecimalDigits;a=this.toFixed(c).toString();if(c&&b.numberDecimalSeparator!="."){var d=a.indexOf(".");a=a.substr(0,d)+b.numberDecimalSeparator+a.substr(d+1)}if(e=="n"||e=="N")a=Number._commaFormat(a,b.numberGroupSizes,b.numberDecimalSeparator,b.numberGroupSeparator);break;case"c":case"C":if(c==-1)c=b.currencyDecimalDigits;a=Math.abs(this).toFixed(c).toString();if(c&&b.currencyDecimalSeparator!="."){var d=a.indexOf(".");a=a.substr(0,d)+b.currencyDecimalSeparator+a.substr(d+1)}a=Number._commaFormat(a,b.currencyGroupSizes,b.currencyDecimalSeparator,b.currencyGroupSeparator);if(this<0)a=String.format(b.currencyNegativePattern,a);else a=String.format(b.currencyPositivePattern,a);break;case"p":case"P":if(c==-1)c=b.percentDecimalDigits;a=(Math.abs(this)*100).toFixed(c).toString();if(c&&b.percentDecimalSeparator!="."){var d=a.indexOf(".");a=a.substr(0,d)+b.percentDecimalSeparator+a.substr(d+1)}a=Number._commaFormat(a,b.percentGroupSizes,b.percentDecimalSeparator,b.percentGroupSeparator);if(this<0)a=String.format(b.percentNegativePattern,a);else a=String.format(b.percentPositivePattern,a)}return a};String.__typeName="String";String.__baseType=Object;String.__class=true;String.empty="";String.prototype.getHashCode=function(){for(var a=0,b=0;b<this.length;b++)a=a*31+this.charCodeAt(b)&4294967295;return a};String.prototype.equals=function(a){return this==a};String.compare=function(a,b,c){if(c){if(a)a=a.toUpperCase();if(b)b=b.toUpperCase()}a=a||"";b=b||"";return a==b?0:a<b?-1:1};String.prototype.compareTo=function(b,a){return String.compare(this,b,a)};String.concat=function(){return Array.prototype.join.call(arguments,"")};String.prototype.endsWith=function(a){return!a.length?true:a.length>this.length?false:this.substr(this.length-a.length)==a};String.equals=function(b,c,a){return String.compare(b,c,a)==0};String._format=function(b,c,a){if(!String._formatRE)String._formatRE=/(\{[^\}^\{]+\})/g;return b.replace(String._formatRE,function(h,d){var g=parseInt(d.substr(1)),b=c[g+1];if(ss.isNullOrUndefined(b))return"";if(b.format){var e=null,f=d.indexOf(":");if(f>0)e=d.substring(f+1,d.length-1);return a?b.localeFormat(e):b.format(e)}else return a?b.toLocaleString():b.toString()})};String.format=function(a){return String._format(a,arguments,false)};String.fromChar=function(a,d){for(var c=a,b=1;b<d;b++)c+=a;return c};String.prototype.htmlDecode=function(){var a=document.createElement("div");a.innerHTML=this;return a.textContent||a.innerText};String.prototype.htmlEncode=function(){var a=document.createElement("div");a.appendChild(document.createTextNode(this));return a.innerHTML.replace(/\"/g,"&quot;")};String.prototype.indexOfAny=function(e,a,f){var b=this.length;if(!b)return-1;e=String.fromCharCode.apply(null,e);a=a||0;f=f||b;var d=a+f-1;if(d>=b)d=b-1;for(var c=a;c<=d;c++)if(e.indexOf(this.charAt(c))>=0)return c;return-1};String.prototype.insert=function(a,b){if(!b)return this.valueOf();if(!a)return b+this;var c=this.substr(0,a),d=this.substr(a);return c+b+d};String.isNullOrEmpty=function(a){return!a||!a.length};String.prototype.lastIndexOfAny=function(e,a,f){var d=this.length;if(!d)return-1;e=String.fromCharCode.apply(null,e);a=a||d-1;f=f||d;var c=a-f+1;if(c<0)c=0;for(var b=a;b>=c;b--)if(e.indexOf(this.charAt(b))>=0)return b;return-1};String.localeFormat=function(a){return String._format(a,arguments,true)};String.prototype.padLeft=function(b,a){if(this.length<b){a=String.fromCharCode(a||32);return String.fromChar(a,b-this.length)+this}return this.valueOf()};String.prototype.padRight=function(b,a){if(this.length<b){a=String.fromCharCode(a||32);return this+String.fromChar(a,b-this.length)}return this.valueOf()};String.prototype.remove=function(a,b){return!b||a+b>this.length?this.substr(0,a):this.substr(0,a)+this.substr(a+b)};String.prototype.replaceAll=function(b,a){a=a||"";return this.split(b).join(a)};String.prototype.startsWith=function(a){return!a.length?true:a.length>this.length?false:this.substr(0,a.length)==a};if(!String.prototype.trim)String.prototype.trim=function(){return this.trimEnd().trimStart()};String.prototype.trimEnd=function(){return this.replace(/\s*$/,"")};String.prototype.trimStart=function(){return this.replace(/^\s*/,"")};Array.__typeName="Array";Array.__baseType=Object;Array.__interfaces=[ss_IEnumerable,ss_ICollection,ss_IList];Array.__class=true;Array.prototype.get_item=function(a){return this[a]};Array.prototype.set_item=function(a,b){this[a]=b};Array.prototype.get_count=function(){return this.length};Array.prototype.getValue=function(b){if(b.length!=(this._sizes?this._sizes.length:1))throw"Invalid number of indices";if(b[0]<0||b[0]>=(this._sizes?this._sizes[0]:this.length))throw"Index 0 out of range";var c=b[0];if(this._sizes)for(var a=1;a<this._sizes.length;a++){if(b[a]<0||b[a]>=this._sizes[a])throw"Index "+a+" out of range";c=c*this._sizes[a]+b[a]}var d=this[c];return typeof d!=="undefined"?d:this._defvalue};Array.prototype.get=function(){return this.getValue(arguments)};Array.prototype.setValue=function(d,b){if(b.length!=(this._sizes?this._sizes.length:1))throw"Invalid number of indices";if(b[0]<0||b[0]>=(this._sizes?this._sizes[0]:this.length))throw"Index 0 out of range";var c=b[0];if(this._sizes)for(var a=1;a<this._sizes.length;a++){if(b[a]<0||b[a]>=this._sizes[a])throw"Index "+a+" out of range";c=c*this._sizes[a]+b[a]}this[c]=d};Array.prototype.set=function(){return this.setValue(arguments[arguments.length-1],Array.prototype.slice.call(arguments,0,arguments.length-1))};Array.prototype.get_rank=function(){return this._sizes?this._sizes.length:1};Array.prototype.getLength=function(a){if(a>=(this._sizes?this._sizes.length:1))throw"Invalid dimension";return this._sizes?this._sizes[a]:this.length};Array.prototype.extract=function(a,b){return!ss.isValue(b)?this.slice(a):this.slice(a,a+b)};Array.prototype.add=function(a){this[this.length]=a};Array.prototype.addRange=function(b){if(b instanceof Array)this.push.apply(this,b);else{var a=b.getEnumerator();try{while(a.moveNext())this.add(a.get_current())}finally{ss_IDisposable.isInstanceOfType(a)&&Type.cast(a,ss_IDisposable).dispose()}}};Array.prototype.clear=function(){this.length=0};Array.prototype.clone=function(){return this.length===1?[this[0]]:Array.apply(null,this)};Array.prototype.contains=function(b){var a=this.indexOf(b);return a>=0};Array.prototype.peekFront=function(){if(this.length)return this[0];throw"Array is empty";};Array.prototype.peekBack=function(){if(this.length)return this[this.length-1];throw"Array is empty";};if(!Array.prototype.every)Array.prototype.every=function(b,c){for(var d=this.length,a=0;a<d;a++)if(a in this&&!b.call(c,this[a],a,this))return false;return true};if(!Array.prototype.filter)Array.prototype.filter=function(d,e){for(var f=this.length,b=[],a=0;a<f;a++)if(a in this){var c=this[a];d.call(e,c,a,this)&&b.push(c)}return b};if(!Array.prototype.forEach)Array.prototype.forEach=function(b,c){for(var d=this.length,a=0;a<d;a++)a in this&&b.call(c,this[a],a,this)};Array.prototype.getEnumerator=function(){return new ss_ArrayEnumerator(this)};if(!Array.prototype.indexOf)Array.prototype.indexOf=function(d,b){b=b||0;var c=this.length;if(c)for(var a=b;a<c;a++)if(this[a]===d)return a;return-1};Array.prototype.insert=function(a,b){this.splice(a,0,b)};Array.prototype.insertRange=function(b,a){if(a instanceof Array)if(b===0)this.unshift.apply(this,a);else for(var d=0;d<a.length;d++)this.splice(b+d,0,a[d]);else{var c=a.getEnumerator();try{while(c.moveNext()){this.insert(b,c.get_current());b++}}finally{ss_IDisposable.isInstanceOfType(c)&&Type.cast(c,ss_IDisposable).dispose()}}};if(!Array.prototype.map)Array.prototype.map=function(d,e){for(var b=this.length,c=new Array(b),a=0;a<b;a++)if(a in this)c[a]=d.call(e,this[a],a,this);return c};Array.parse=function(a){return eval("("+a+")")};Array.prototype.remove=function(b){var a=this.indexOf(b);if(a>=0){this.splice(a,1);return true}return false};Array.prototype.removeAt=function(a){this.splice(a,1)};Array.prototype.removeRange=function(b,a){this.splice(b,a)};if(!Array.prototype.some)Array.prototype.some=function(b,c){for(var d=this.length,a=0;a<d;a++)if(a in this&&b.call(c,this[a],a,this))return true;return false};Array.toArray=function(a){return Array.prototype.slice.call(a)};Array.fromEnumerable=function(c){var a=c.getEnumerator(),b=[];try{while(a.moveNext())b.push(a.get_current())}finally{a.dispose()}return b};Array.multidim=function(d){var a=[];a._defvalue=d;a._sizes=[arguments[1]];for(var c=arguments[1],b=2;b<arguments.length;b++){c*=arguments[b];a._sizes[b-1]=arguments[b]}a.length=c;return a};RegExp.__typeName="RegExp";RegExp.__baseType=Object;RegExp.__class=true;Date.__typeName="Date";Date.__baseType=Object;Date.getDefaultValue=Date.createInstance=function(){return new Date(0)};Date.prototype.getHashCode=function(){return this.valueOf()&4294967295};Date.prototype.equals=function(a){return this.valueOf()===a.valueOf()};Date.get_now=function(){return new Date};Date.get_today=function(){var a=new Date;return new Date(a.getFullYear(),a.getMonth(),a.getDate())};Date.areEqual=function(b,a){return!ss.isValue(b)?!ss.isValue(a):!ss.isValue(a)?false:b.valueOf()===a.valueOf()};Date.areNotEqual=function(a,b){return!Date.areEqual(a,b)};Date.prototype.format=function(a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?this.toString():a=="id"?this.toDateString():a=="it"?this.toTimeString():this._netFormat(a,false)};Date.prototype.localeFormat=function(a){return ss.isNullOrUndefined(a)||a.length==0||a=="i"?this.toLocaleString():a=="id"?this.toLocaleDateString():a=="it"?this.toLocaleTimeString():this._netFormat(a,true)};Date.prototype._netFormat=function(d,i){var b=this,c=i?ss_CultureInfo.CurrentCulture.dateFormat:ss_CultureInfo.InvariantCulture.dateFormat;if(d.length==1)switch(d){case"f":d=c.longDatePattern+" "+c.shortTimePattern;break;case"F":d=c.dateTimePattern;break;case"d":d=c.shortDatePattern;break;case"D":d=c.longDatePattern;break;case"t":d=c.shortTimePattern;break;case"T":d=c.longTimePattern;break;case"g":d=c.shortDatePattern+" "+c.shortTimePattern;break;case"G":d=c.shortDatePattern+" "+c.longTimePattern;break;case"R":case"r":c=ss_CultureInfo.InvariantCulture.dateFormat;d=c.gmtDateTimePattern;break;case"u":d=c.universalDateTimePattern;break;case"U":d=c.dateTimePattern;b=new Date(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());break;case"s":d=c.sortableDateTimePattern}if(d.charAt(0)=="%")d=d.substr(1);if(!Date._formatRE)Date._formatRE=/'.*?[^\\]'|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z/g;var g=Date._formatRE,h=new ss_StringBuilder;g.lastIndex=0;while(true){var j=g.lastIndex,f=g.exec(d);h.append(d.slice(j,f?f.index:d.length));if(!f)break;var e=f[0],a=e;switch(e){case"dddd":a=c.dayNames[b.getDay()];break;case"ddd":a=c.shortDayNames[b.getDay()];break;case"dd":a=b.getDate().toString().padLeft(2,48);break;case"d":a=b.getDate();break;case"MMMM":a=c.monthNames[b.getMonth()];break;case"MMM":a=c.shortMonthNames[b.getMonth()];break;case"MM":a=(b.getMonth()+1).toString().padLeft(2,48);break;case"M":a=b.getMonth()+1;break;case"yyyy":a=b.getFullYear();break;case"yy":a=(b.getFullYear()%100).toString().padLeft(2,48);break;case"y":a=b.getFullYear()%100;break;case"h":case"hh":a=b.getHours()%12;if(!a)a="12";else if(e=="hh")a=a.toString().padLeft(2,48);break;case"HH":a=b.getHours().toString().padLeft(2,48);break;case"H":a=b.getHours();break;case"mm":a=b.getMinutes().toString().padLeft(2,48);break;case"m":a=b.getMinutes();break;case"ss":a=b.getSeconds().toString().padLeft(2,48);break;case"s":a=b.getSeconds();break;case"t":case"tt":a=b.getHours()<12?c.amDesignator:c.pmDesignator;if(e=="t")a=a.charAt(0);break;case"fff":a=b.getMilliseconds().toString().padLeft(3,48);break;case"ff":a=b.getMilliseconds().toString().padLeft(3).substr(0,2);break;case"f":a=b.getMilliseconds().toString().padLeft(3).charAt(0);break;case"z":a=b.getTimezoneOffset()/60;a=(a>=0?"-":"+")+Math.floor(Math.abs(a));break;case"zz":case"zzz":a=b.getTimezoneOffset()/60;a=(a>=0?"-":"+")+Math.floor(Math.abs(a)).toString().padLeft(2,48);if(e=="zzz")a+=c.timeSeparator+Math.abs(b.getTimezoneOffset()%60).toString().padLeft(2,48);break;default:if(a.charAt(0)=="'")a=a.substr(1,a.length-2).replace(/\\'/g,"'")}h.append(a)}return h.toString()};Date.parseDate=function(a){return new Date(Date.parse(a))};Date._parseExact=function(c,i,p,s){p=p||ss_CultureInfo.CurrentCulture;var n=p.amDesignator,o=p.pmDesignator,r=function(b){for(var c="1234567890",a=0;a<b.length;a++)if(c.indexOf(b.charAt(a))==-1)return false;return true},h=function(f,d,c,e){for(var b=e;b>=c;b--){var a=f.substring(d,d+b);if(a.length<c)return null;if(r(a))return a}return null};c=c+"";i=i+"";var b=0,m=0,q="",a="",e=0,f=1,g=1,d=0,k=0,j=0,l="";while(m<i.length){q=i.charAt(m);a="";while(i.charAt(m)==q&&m<i.length)a+=i.charAt(m++);if(a=="yyyy"||a=="yy"||a=="y"){if(a=="yyyy")e=h(c,b,4,4);if(a=="yy")e=h(c,b,2,2);if(a=="y")e=h(c,b,2,4);if(e==null)return null;b+=e.length;if(e.length==2)if(e>30)e=1900+(e-0);else e=2e3+(e-0)}else if(a=="MM"||a=="M"){f=h(c,b,a.length,2);if(f==null||f<1||f>12)return null;b+=f.length}else if(a=="dd"||a=="d"){g=h(c,b,a.length,2);if(g==null||g<1||g>31)return null;b+=g.length}else if(a=="hh"||a=="h"){d=h(c,b,a.length,2);if(d==null||d<1||d>12)return null;b+=d.length}else if(a=="HH"||a=="H"){d=h(c,b,a.length,2);if(d==null||d<0||d>23)return null;b+=d.length}else if(a=="mm"||a=="m"){k=h(c,b,a.length,2);if(k==null||k<0||k>59)return null;b+=k.length}else if(a=="ss"||a=="s"){j=h(c,b,a.length,2);if(j==null||j<0||j>59)return null;b+=j.length}else if(a=="t"){if(c.substring(b,b+1).toLowerCase()==n.charAt(0).toLowerCase())l=n;else if(c.substring(b,b+1).toLowerCase()==o.charAt(0).toLowerCase())l=o;else return null;b+=1}else if(a=="tt"){if(c.substring(b,b+2).toLowerCase()==n.toLowerCase())l=n;else if(c.substring(b,b+2).toLowerCase()==o.toLowerCase())l=o;else return null;b+=2}else if(c.substring(b,b+a.length)!=a)return null;else b+=a.length}if(b!=c.length)return null;if(f==2)if(e%4==0&&e%100!=0||e%400==0){if(g>29)return null}else if(g>28)return null;if(f==4||f==6||f==9||f==11)if(g>30)return null;if(d<12&&l==o)d=d-0+12;else if(d>11&&l==n)d-=12;return s?new Date(Date.UTC(e,f-1,g,d,k,j)):new Date(e,f-1,g,d,k,j)};Date.parseExact=function(c,b,a){return Date._parseExact(c,b,a,false)};Date.parseExactUTC=function(c,b,a){return Date._parseExact(c,b,a,true)};Error.__typeName="Error";Error.__baseType=Object;Error.prototype.popStackFrame=function(){if(ss.isNullOrUndefined(this.stack)||ss.isNullOrUndefined(this.fileName)||ss.isNullOrUndefined(this.lineNumber))return;var a=this.stack.split("\n"),c=a[0],e=this.fileName+":"+this.lineNumber;while(!ss.isNullOrUndefined(c)&&c.indexOf(e)===-1){a.shift();c=a[0]}var d=a[1];if(isNullOrUndefined(d))return;var b=d.match(/@(.*):(\d+)$/);if(ss.isNullOrUndefined(b))return;a.shift();this.stack=a.join("\n");this.fileName=b[1];this.lineNumber=parseInt(b[2])};Error.createError=function(e,b,c){var a=new Error(e);if(b)for(var d in b)a[d]=b[d];if(c)a.innerException=c;a.popStackFrame();return a};Function.__typeName="Function";Function.__baseType=Object;Function.__class=true;Function.empty=function(){};Function._contains=function(b,d,c){for(var a=0;a<b.length;a+=2)if(b[a]===d&&b[a+1]===c)return true;return false};Function._mkdel=function(a){var b=function(){if(a.length==2)return a[1].apply(a[0],arguments);else{for(var c=a.clone(),b=0;b<c.length;b+=2)Function._contains(a,c[b],c[b+1])&&c[b+1].apply(c[b],arguments);return null}};b._targets=a;return b};Function.mkdel=function(b,a){return!b?a:Function._mkdel([b,a])};Function.combine=function(a,b){if(!a)return!b._targets?Function.mkdel(null,b):b;if(!b)return!a._targets?Function.mkdel(null,a):a;var c=a._targets?a._targets:[null,a],d=b._targets?b._targets:[null,b];return Function._mkdel(c.concat(d))};Function.remove=function(c,a){if(!c||c===a)return null;if(!a)return c;var b=c._targets,f=null,e;if(a._targets){f=a._targets[0];e=a._targets[1]}else e=a;for(var d=0;d<b.length;d+=2)if(b[d]===f&&b[d+1]===e){if(b.length==2)return null;b.splice(d,2);return Function._mkdel(b)}return c};Function.clone=function(a){return a._targets?Function._mkdel(a._targets):function(){return a.apply(this,arguments)}};Function.thisFix=function(a){return function(){for(var c=[this],b=0;b<arguments.length;b++)c.push(arguments[b]);return a.apply(a,c)}};ss.Debug=global.Debug||function(){};ss.Debug.__typeName="Debug";if(!ss.Debug.writeln)ss.Debug.writeln=function(a){if(global.console){if(global.console.debug){global.console.debug(a);return}else if(global.console.log){global.console.log(a);return}}else if(global.opera&&global.opera.postError){global.opera.postError(a);return}};ss.Debug._fail=function(a){ss.Debug.writeln(a);eval("debugger;")};ss.Debug.assert=function(b,a){if(!b){a="Assert failed: "+a;confirm(a+"\r\n\r\nBreak into debugger?")&&ss.Debug._fail(a)}};ss.Debug.fail=function(a){ss.Debug._fail(a)};var ss_Enum=function(){};Type.registerClass(global,"ss.Enum",ss_Enum);ss_Enum.parse=function(d,i){var a=d.prototype;if(!d.__flags){for(var b in a)if(b===i)return a[b]}else{for(var g=i.split("|"),h=0,e=true,c=g.length-1;c>=0;c--){var j=g[c].trim(),f=false;for(var b in a)if(b===j){h|=a[b];f=true;break}if(!f){e=false;break}}if(e)return h}throw"Invalid Enumeration Value";};ss_Enum.toString=function(e,d){var a=e.prototype;if(!e.__flags||d===0){for(var b in a)if(a[b]===d)return b;throw"Invalid Enumeration Value";}else{var c=[];for(var b in a)a[b]&d&&c.add(b);if(!c.length)throw"Invalid Enumeration Value";return c.join(" | ")}};var ss_CultureInfo=function(c,a,b){this.name=c;this.numberFormat=a;this.dateFormat=b};Type.registerClass(global,"ss.CultureInfo",ss_CultureInfo);ss_CultureInfo.InvariantCulture=new ss_CultureInfo("en-US",{naNSymbol:"NaN",negativeSign:"-",positiveSign:"+",negativeInfinityText:"-Infinity",positiveInfinityText:"Infinity",percentSymbol:"%",percentGroupSizes:[3],percentDecimalDigits:2,percentDecimalSeparator:".",percentGroupSeparator:",",percentPositivePattern:"{0} %",percentNegativePattern:"-{0} %",currencySymbol:"$",currencyGroupSizes:[3],currencyDecimalDigits:2,currencyDecimalSeparator:".",currencyGroupSeparator:",",currencyNegativePattern:"(${0})",currencyPositivePattern:"${0}",numberGroupSizes:[3],numberDecimalDigits:2,numberDecimalSeparator:".",numberGroupSeparator:","},{amDesignator:"AM",pmDesignator:"PM",dateSeparator:"/",timeSeparator:":",gmtDateTimePattern:"ddd, dd MMM yyyy HH:mm:ss 'GMT'",universalDateTimePattern:"yyyy-MM-dd HH:mm:ssZ",sortableDateTimePattern:"yyyy-MM-ddTHH:mm:ss",dateTimePattern:"dddd, MMMM dd, yyyy h:mm:ss tt",longDatePattern:"dddd, MMMM dd, yyyy",shortDatePattern:"M/d/yyyy",longTimePattern:"h:mm:ss tt",shortTimePattern:"h:mm tt",firstDayOfWeek:0,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],minimizedDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December",""],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]});ss_CultureInfo.CurrentCulture=ss_CultureInfo.InvariantCulture;var ss_IEnumerator=function(){};ss_IEnumerator.prototype={get_current:null,moveNext:null,reset:null};Type.registerInterface(global,"ss.IEnumerator",ss_IEnumerator,ss_IDisposable);var ss_IEnumerable=function(){};ss_IEnumerable.prototype={getEnumerator:null};ss_IEnumerable.isAssignableFrom=function(a){return a==Array?true:Type.prototype.isAssignableFrom.call(this,a)};Type.registerInterface(global,"ss.IEnumerable",ss_IEnumerable);var ss_IEquatable=function(){};ss_IEquatable.prototype={equals:null};Type.registerInterface(global,"ss.IEquatable",ss_IEquatable);var ss_IHashable=function(){};ss_IHashable.prototype={getHashCode:null};Type.registerInterface(global,"ss.IHashable",ss_IHashable,ss_IEquatable);var ss_ICollection=function(){};ss_ICollection.prototype={get_count:null,add:null,clear:null,contains:null,remove:null};ss_ICollection.isAssignableFrom=function(a){return a==Array?true:Type.prototype.isAssignableFrom.call(this,a)};Type.registerInterface(global,"ss.ICollection",ss_IEnumerable);var ss_Nullable=function(){};Type.registerClass(global,"ss.Nullable",ss_Nullable);ss_Nullable.unbox=function(a){if(!ss.isValue(a))throw"Instance is null";return a};ss_Nullable.eq=function(a,b){return!ss.isValue(a)?!ss.isValue(b):a===b};ss_Nullable.ne=function(a,b){return!ss.isValue(a)?ss.isValue(b):a!==b};ss_Nullable.le=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a<=b};ss_Nullable.ge=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a>=b};ss_Nullable.lt=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a<b};ss_Nullable.gt=function(a,b){return ss.isValue(a)&&ss.isValue(b)&&a>b};ss_Nullable.sub=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a-b:null};ss_Nullable.add=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a+b:null};ss_Nullable.mod=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a%b:null};ss_Nullable.div=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a/b:null};ss_Nullable.mul=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a*b:null};ss_Nullable.band=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a&b:null};ss_Nullable.bor=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a|b:null};ss_Nullable.xor=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a^b:null};ss_Nullable.shl=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a<<b:null};ss_Nullable.srs=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a>>b:null};ss_Nullable.sru=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a>>>b:null};ss_Nullable.and=function(a,b){return a===true&&b===true?true:a===false||b===false?false:null};ss_Nullable.or=function(a,b){return a===true||b===true?true:a===false&&b===false?false:null};ss_Nullable.not=function(a){return ss.isValue(a)?!a:null};ss_Nullable.neg=function(a){return ss.isValue(a)?-a:null};ss_Nullable.pos=function(a){return ss.isValue(a)?+a:null};ss_Nullable.cpl=function(a){return ss.isValue(a)?~a:null};var ss_IList=function(){};ss_IList.prototype={get_item:null,set_item:null,indexOf:null,insert:null,removeAt:null};ss_IList.isAssignableFrom=function(a){return a==Array?true:Type.prototype.isAssignableFrom.call(this,a)};Type.registerInterface(global,"ss.IList",ss_IList,ss_ICollection,ss_IEnumerable);var ss_IDictionary=function(){};ss_IDictionary.prototype={get_item:null,set_item:null,get_keys:null,get_values:null,containsKey:null,add:null,remove:null,tryGetValue:null};Type.registerInterface(global,"ss.IDictionary",ss_IDictionary,[ss_IEnumerable]);var ss_Int32=function(){};Type.registerClass(global,"ss.Int32",ss_Int32);ss_Int32.__class=false;ss_Int32.isInstanceOfType=function(a){return typeof a==="number"&&isFinite(a)&&Math.round(a,0)==a};ss_Int32.getDefaultValue=ss_Int32.createInstance=function(){return 0};ss_Int32.div=function(a,b){return ss.isValue(a)&&ss.isValue(b)?a/b|0:null};ss_Int32.trunc=function(a){return ss.isValue(a)?a|0:null};var ss_JsDate=function(){};Type.registerClass(global,"ss.JsDate",ss_JsDate);ss_JsDate.createInstance=function(){return new Date};ss_JsDate.isInstanceOfType=function(a){return a instanceof Date};var ss_ArrayEnumerator=function(a){this._array=a;this._index=-1};ss_ArrayEnumerator.prototype={moveNext:function(){this._index++;return this._index<this._array.length},reset:function(){this._index=-1},get_current:function(){if(this._index<0||this._index>=this._array.length)throw"Invalid operation";return this._array[this._index]},dispose:function(){}};Type.registerClass(global,"ss.ArrayEnumerator",ss_ArrayEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_ObjectEnumerator=function(a){this._keys=Object.keys(a);this._index=-1;this._object=a};ss_ObjectEnumerator.prototype={moveNext:function(){this._index++;return this._index<this._keys.length},reset:function(){this._index=-1},get_current:function(){if(this._index<0||this._index>=this._keys.length)throw"Invalid operation";var a=this._keys[this._index];return{key:a,value:this._object[a]}},dispose:function(){}};Type.registerClass(global,"ss.ObjectEnumerator",ss_ObjectEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_$DictionaryCollection=function(b,a){this._dict=b;this._isKeys=a};ss_$DictionaryCollection.prototype={get_count:function(){return this._dict.get_count()},contains:function(d){if(this._isKeys)return this._dict.containsKey(d);else{for(var c in this._dict.buckets)if(this._dict.buckets.hasOwnProperty(c))for(var b=this._dict.buckets[c],a=0;a<b.length;a++)if(b[a].value.equals(d))return true;return false}},getEnumerator:function(){return this._dict._getEnumerator(this._isKeys?function(a){return a.key}:function(a){return a.value})},add:function(){throw"Collection is read-only";},clear:function(){throw"Collection is read-only";},remove:function(){throw"Collection is read-only";}};var ss_Dictionary$2=function(c,b){var a=function(a){this.countField=0;this.buckets={};if(ss_IDictionary.isInstanceOfType(a)){var b=Type.cast(a,ss_IDictionary).getEnumerator();try{while(b.moveNext()){var e=b.get_current();this.add(e.key,e.value)}}finally{ss_IDisposable.isInstanceOfType(b)&&Type.cast(b,ss_IDisposable).dispose()}}else if(a)for(var d=Object.keys(a),c=0;c<d.length;c++)this.add(d[c],a[d[c]])};a.prototype={_setOrAdd:function(b,f,g){var e=b.getHashCode(),d={key:b,value:f};if(this.buckets.hasOwnProperty(e)){for(var a=this.buckets[e],c=0;c<a.length;c++)if(a[c].key.equals(b)){if(g)throw"Key "+b+" already exists.";a[c]=d;return}a.push(d)}else this.buckets[e]=[d];this.countField++},add:function(b,a){this._setOrAdd(b,a,true)},set_item:function(b,a){this._setOrAdd(b,a,false)},_get:function(e){var d=e.getHashCode();if(this.buckets.hasOwnProperty(d))for(var c=this.buckets[d],b=0;b<c.length;b++){var a=c[b];if(a.key.equals(e))return a.value!==undefined?a.value:null}return undefined},get_item:function(a){var b=this._get(a);if(b===undefined)throw"Key "+a+" does not exist.";return b},tryGetValue:function(d,a){var c=this._get(d);if(c!==undefined){a.$=c;return true}else{a.$=b.getDefaultValue();return false}},containsKey:function(d){var c=d.getHashCode();if(!this.buckets.hasOwnProperty(c))return false;for(var b=this.buckets[c],a=0;a<b.length;a++)if(b[a].key.equals(d))return true;return false},clear:function(){this.countField=0;this.buckets={}},remove:function(d){var c=d.getHashCode();if(!this.buckets.hasOwnProperty(c))return false;for(var a=this.buckets[c],b=0;b<a.length;b++)if(a[b].key.equals(d)){a.splice(b,1);if(a.length==0)delete this.buckets[c];this.countField--;return true}return false},get_count:function(){return this.countField},_getEnumerator:function(d){var c=Object.keys(this.buckets),a=-1,b;return new ss_IteratorBlockEnumerator(function(){if(a<0||b>=this.buckets[c[a]].length-1){b=-1;a++}if(a>=c.length)return false;b++;return true},function(){return d(this.buckets[c[a]][b])},null,this)},get_keys:function(){return new ss_$DictionaryCollection(this,true)},get_values:function(){return new ss_$DictionaryCollection(this,false)},getEnumerator:function(){return this._getEnumerator(function(a){return a})}};a.registerGenericClassInstance(a,ss_Dictionary$2,[c,b],function(){return null},function(){return[ss_IDictionary,ss_IEnumerable]});return a};Type.registerGenericClass(global,"ss.Dictionary$2",ss_Dictionary$2,2);Type.registerClass(global,"ss.$DictionaryCollection",ss_$DictionaryCollection,null,[ss_IEnumerable,ss_ICollection]);var ss_IDisposable=function(){};ss_IDisposable.prototype={dispose:null};Type.registerInterface(global,"ss.IDisposable",ss_IDisposable);var ss_StringBuilder=function(a){this._parts=ss.isNullOrUndefined(a)||a===""?[]:[a];this.isEmpty=this._parts.length==0};ss_StringBuilder.prototype={append:function(a){if(!ss.isNullOrUndefined(a)&&a!==""){this._parts.add(a);this.isEmpty=false}return this},appendChar:function(a){return this.append(String.fromCharCode(a))},appendLine:function(a){this.append(a);this.append("\r\n");this.isEmpty=false;return this},appendLineChar:function(a){return this.appendLine(String.fromCharCode(a))},clear:function(){this._parts=[];this.isEmpty=true},toString:function(){return this._parts.join("")}};Type.registerClass(global,"ss.StringBuilder",ss_StringBuilder);var ss_EventArgs=function(){};Type.registerClass(global,"ss.EventArgs",ss_EventArgs);ss_EventArgs.Empty=new ss_EventArgs;var ss_Exception=function(b,a){this._message=b||null;this._innerException=a||null};Type.registerClass(global,"ss.Exception",ss_Exception);ss_Exception.prototype={get_message:function(){return this._message},get_innerException:function(){return this._innerException}};ss_Exception.wrap=function(a){return ss_Exception.isInstanceOfType(a)?a:a instanceof Error?new ss_JsErrorException(a):new ss_Exception(a.toString())};var ss_NotSupportedException=function(b,a){ss_Exception.call(this,b,a)};Type.registerClass(global,"ss.NotSupportedException",ss_NotSupportedException,ss_Exception);var ss_AggregateException=function(b,a){if(typeof b!=="string"){a=b;b="One or more errors occurred."}a=ss.isValue(a)?Array.fromEnumerable(a):null;ss_Exception.call(this,b,a&&a.length?a[0]:null);this._innerExceptions=a};ss_AggregateException.prototype={get_innerExceptions:function(){return this._innerExceptions}};Type.registerClass(global,"ss.AggregateException",ss_AggregateException,ss_Exception);var ss_PromiseException=function(a){ss_Exception.call(this,a[0]?a[0].toString():"An error occurred");this._arguments=a.clone()};ss_PromiseException.prototype={get_arguments:function(){return this._arguments}};Type.registerClass(global,"ss.PromiseException",ss_PromiseException,ss_Exception);var ss_JsErrorException=function(a){ss_Exception.call(this,a.message);this._error=a};ss_JsErrorException.prototype={get_error:function(){return this._error}};Type.registerClass(global,"ss.JsErrorException",ss_JsErrorException,ss_Exception);var ss_IteratorBlockEnumerable=function(a,b){this._getEnumerator=a;this._this=b};ss_IteratorBlockEnumerable.prototype={getEnumerator:function(){return this._getEnumerator.call(this._this)}};Type.registerClass(global,"ss.IteratorBlockEnumerable",ss_IteratorBlockEnumerable,null,ss_IEnumerable);var ss_IteratorBlockEnumerator=function(b,a,c,d){this._moveNext=b;this._getCurrent=a;this._dispose=c;this._this=d};ss_IteratorBlockEnumerator.prototype={moveNext:function(){try{return this._moveNext.call(this._this)}catch(a){this._dispose&&this._dispose.call(this._this);throw a;}},get_current:function(){return this._getCurrent.call(this._this)},reset:function(){throw new ss_NotSupportedException("Reset is not supported.");},dispose:function(){this._dispose&&this._dispose.call(this._this)}};Type.registerClass(global,"ss.IteratorBlockEnumerator",ss_IteratorBlockEnumerator,null,[ss_IEnumerator,ss_IDisposable]);var ss_Task=function(a,b){this._action=a;this._state=b;this.exception=null;this.status=0;this._thens=[];this._result=null};ss_Task.prototype={continueWith:function(c){var a=new ss_TaskCompletionSource,d=this,b=function(){try{a.setResult(c(d))}catch(b){a.setException(ss_Exception.wrap(b))}};if(this.isCompleted())setTimeout(b,0);else this._thens.push(b);return a.task},start:function(){if(this.status!==0)throw"Task was already started.";var a=this;this.status=3;setTimeout(function(){try{var b=a._action(a._state);delete a._action;delete a._state;a._complete(b)}catch(c){a._fail(new ss_AggregateException([ss_Exception.wrap(c)]))}},0)},_runCallbacks:function(){for(var a=0;a<this._thens.length;a++)this._thens[a](this);delete this._thens},_complete:function(a){if(this.isCompleted())return false;this._result=a;this.status=5;this._runCallbacks();return true},_fail:function(a){if(this.isCompleted())return false;this.exception=a;this.status=7;this._runCallbacks();return true},_cancel:function(){if(this.isCompleted())return false;this.status=6;this._runCallbacks();return true},isCanceled:function(){return this.status===6},isCompleted:function(){return this.status>=5},isFaulted:function(){return this.status===7},getResult:function(){switch(this.status){case 5:return this._result;case 6:throw"Task was cancelled.";case 7:throw this.exception;default:throw"Task is not yet completed.";}},dispose:function(){}};ss_Task.delay=function(b){var a=new ss_TaskCompletionSource;setTimeout(function(){a.setResult(0)},b);return a.task};ss_Task.fromResult=function(b){var a=new ss_Task;a.status=5;a._result=b;return a};ss_Task.run=function(b){var a=new ss_TaskCompletionSource;setTimeout(function(){try{a.setResult(b())}catch(c){a.setException(ss_Exception.wrap(c))}},0);return a.task};ss_Task.whenAll=function(a){var b=new ss_TaskCompletionSource;if(a.length===0)b.setResult([]);else for(var f=new Array(a.length),g=a.length,e=false,c=[],d=0;d<a.length;d++)(function(d){a[d].continueWith(function(a){switch(a.status){case 5:f[d]=a.getResult();break;case 6:e=true;break;case 7:c.addRange(a.exception.get_innerExceptions());break;default:throw"Invalid task status "+a.status;}if(--g===0)if(c.length>0)b.setException(c);else if(e)b.setCanceled();else b.setResult(f)})})(d);return b.task};ss_Task.whenAny=function(b){if(!b.length)throw"Must wait for at least one task";for(var a=new ss_TaskCompletionSource,c=0;c<b.length;c++)b[c].continueWith(function(b){switch(b.status){case 5:a.trySetResult(b);break;case 6:a.trySetCanceled();break;case 7:a.trySetException(b.exception.get_innerExceptions());break;default:throw"Invalid task status "+b.status;}});return a.task};ss_Task.fromDoneCallback=function(e,b,d){var c=new ss_TaskCompletionSource,a;if(typeof b==="number"){a=Array.prototype.slice.call(arguments,3);if(b<0)b+=a.length+1}else{a=Array.prototype.slice.call(arguments,2);d=b;b=a.length}var f=function(a){c.setResult(a)};a=a.slice(0,b).concat(f,a.slice(b));e[d].apply(e,a);return c.task};ss_Task.fromPromise=function(c,a){var b=new ss_TaskCompletionSource;if(typeof a==="number")a=function(a){return function(){return arguments[a>=0?a:arguments.length+a]}}(a);else if(typeof a!=="function")a=function(){return Array.prototype.slice.call(arguments,0)};c.then(function(){b.setResult(typeof a==="function"?a.apply(null,arguments):null)},function(){b.setException(new ss_PromiseException(Array.prototype.slice.call(arguments,0)))});return b.task};ss_Task.fromNode=function(e,b,d){var c=new ss_TaskCompletionSource,a;if(typeof b==="function")a=Array.prototype.slice.call(arguments,3);else{a=Array.prototype.slice.call(arguments,2);d=b;b=function(){return arguments[0]}}var f=function(a){if(a)c.setException(ss_Exception.wrap(a));else c.setResult(b.apply(null,Array.prototype.slice.call(arguments,1)))};a.push(f);e[d].apply(e,a);return c.task};Type.registerClass(global,"ss.Task",ss_Task,null,ss_IDisposable);var ss_TaskStatus=function(){};ss_TaskStatus.prototype={created:0,running:3,ranToCompletion:5,canceled:6,faulted:7};Type.registerEnum(global,"ss.TaskStatus",ss_TaskStatus,false);var ss_TaskCompletionSource=function(){this.task=new ss_Task;this.task.status=3};ss_TaskCompletionSource.prototype={setCanceled:function(){if(!this.task._cancel())throw"Task was already completed.";},setResult:function(a){if(!this.task._complete(a))throw"Task was already completed.";},setException:function(a){if(!this.trySetException(a))throw"Task was already completed.";},trySetCanceled:function(){return this.task._cancel()},trySetResult:function(a){return this.task._complete(a)},trySetException:function(a){if(!Type.canCast(a,ss_AggregateException)){if(Type.canCast(a,ss_Exception))a=[a];a=new ss_AggregateException(a)}return this.task._fail(a)}};Type.registerClass(global,"ss.TaskCompletionSource",ss_TaskCompletionSource);var ss_CancelEventArgs=function(){ss_CancelEventArgs.call(this);this.cancel=false};Type.registerClass(global,"ss.CancelEventArgs",ss_CancelEventArgs,ss_EventArgs);var ss_IApplication=function(){};Type.registerInterface(global,"ss.IApplication",ss_IApplication);var ss_IContainer=function(){};Type.registerInterface(global,"ss.IContainer",ss_IContainer);var ss_IObjectFactory=function(){};Type.registerInterface(global,"ss.IObjectFactory",ss_IObjectFactory);var ss_IEventManager=function(){};Type.registerInterface(global,"ss.IEventManager",ss_IEventManager);var ss_IInitializable=function(){};Type.registerInterface(global,"ss.IInitializable",ss_IInitializable);if(global.ss){for(var n in ss)if(ss.hasOwnProperty(n))global.ss[n]=ss[n]}else global.ss=ss